<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>learn dojo</title>
  <meta charset="utf-8">
	<meta name="theme-color" content="#009dff">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="learn dojo - byte by byte">
	<link rel="icon" href="/assets/favicon.ico" />
	<link rel="stylesheet" type="text/css" href="../prism.1_inztFX.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-56544808-7');
	</script>
<meta name="apple-mobile-web-app-title" content="learn-dojo" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="apple-mobile-web-app-status-bar-style" content="default" /><meta name="theme-color" content="#009dff" /><link rel="apple-touch-icon" sizes="512x512" href="../icon_512x512.ca45ef50142a78ad4bd2d28215f15034.png" /><link rel="apple-touch-icon" sizes="256x256" href="../icon_256x256.7da342a93e078e9a7fef21fa5d9dbbaf.png" /><link rel="apple-touch-icon" sizes="128x128" href="../icon_128x128.811bfb9a7c545c93ad37790968688f24.png" /><link rel="manifest" href="../manifest.83b2d52a04a4315afec956b410eaacf0.json" /><meta name="mobile-web-app-capable" content="yes"><style>/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */@import url(https://fonts.googleapis.com/css?family=Montserrat&display=swap);body{margin:0;padding:0;color:rgba(46,46,46,.95)}header{font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}code[class*=language-],pre[class*=language-]{font-size:14px}/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */.button-m__root__12yR4,.button-m__root__12yR4 *,.button-m__root__12yR4:after,.button-m__root__12yR4:before{-webkit-box-sizing:border-box;box-sizing:border-box}.button-m__root__12yR4{background-color:#fff;background-color:var(--color-background);border:1px solid #d6dde2;border:var(--border-width) solid var(--color-border);color:#006be6;color:var(--color-highlight);cursor:pointer;display:inline-block;font-size:16px;font-size:var(--font-size-base);font-weight:700;line-height:24px;line-height:var(--line-height-base);min-width:calc(8px * 20);min-width:calc(var(--grid-base) * 20);padding:8px;padding:var(--spacing-regular);-webkit-transition:all .25s ease;transition:all .25s ease;-webkit-transition:all var(--transition-duration) var(--transition-easing);transition:all var(--transition-duration) var(--transition-easing);margin:0}.button-m__root__12yR4:focus,.button-m__root__12yR4:hover{border-color:#006be6;border-color:var(--color-highlight);-webkit-box-shadow:0 2px 2px 0 rgba(0,107,230,.2);box-shadow:0 2px 2px 0 rgba(0,107,230,.2);-webkit-box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);outline:none}.button-m__root__12yR4:focus .button-m__addon__1vLjS,.button-m__root__12yR4:hover .button-m__addon__1vLjS{border-left-color:#006be6;border-left-color:var(--color-highlight)}@-webkit-keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@font-face{font-family:dojo2BaseTheme;src:url(4320b561bf6b259b0082d83d4848daf9.3VSAx8ft.ttf) format("truetype"),url(a302b51c64828d7c0aaf95c1cfa4daad.2JSGjfMp.woff) format("woff"),url(79b71beaafd0e1d0897d414fa6b1f796.2mZX6CjQ.svg#dojo2) format("svg");font-weight:400;font-style:normal}@-webkit-keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}@keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}:root{--tab-width:calc(var(--grid-base) * 16)}.toolbar-m__root__zQuGH{background:#fff;background:var(--color-background);border-top:1px solid #d6dde2;border-top:var(--border-width) solid var(--color-border);border-bottom:1px solid #d6dde2;border-bottom:var(--border-width) solid var(--color-border);-webkit-box-sizing:border-box;box-sizing:border-box;height:calc(7 * 8px);height:calc(7 * var(--grid-base));padding:calc(2 * 8px);padding:calc(2 * var(--grid-base));text-align:left}.toolbar-m__title__3F385{font-size:20px;font-size:var(--font-size-title);margin:0;font-weight:400}:root{--grid-base:8px;--spacing-regular:var(--grid-base);--spacing-large:calc(var(--grid-base) * 2);--touch-target-min:48px;--font-size-base:16px;--font-size-small:14px;--font-size-title:20px;--font-size-icon:24px;--line-height-base:24px;--color-text-primary:#000;--color-text-faded:#5c6c7c;--color-text-inverted:#fff;--color-highlight:#006be6;--color-highlight-border:#298dff;--color-success:#188701;--color-error:#eb1313;--color-background:#fff;--color-background-inverted:#5c6c7c;--color-background-faded:#f4f6f7;--color-border:#d6dde2;--color-border-strong:#5c6c7c;--color-border-invalid:#f7c4c4;--color-border-valid:#bcefb1;--color-box-shadow:rgba(0,0,0,0.2);--color-box-shadow-highlight:rgba(0,107,230,0.2);--color-box-shadow-strong:rgba(0,0,0,0.5);--color-box-shadow-focus:rgba(0,107,230,0.2);--color-box-shadow-invalid:rgba(235,19,19,0.2);--color-box-shadow-valid:rgba(24,135,1,0.2);--box-shadow-dimensions-small:0 2px 2px 0;--box-shadow-dimensions-large:0 9px 16px 0;--border-width:1px;--border-width-emphasized:2px;--transition-duration:0.25s;--transition-easing:ease;--zindex-base:0;--zindex-tooltip:100;--zindex-dropdown:200;--zindex-fixed:300;--zindex-dialog:400;--zindex-alert:500}.Footer-m__root__1zPMX{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;padding:3rem 1rem;overflow:hidden}.Footer-m__details__2pZwP{font-size:.75rem}@font-face{font-family:dojo2;src:url(dojo2.1jRzby-N.ttf) format("truetype"),url(dojo2.6KF-s-BX.woff) format("woff"),url(dojo2.1LTNJcFj.svg#dojo2) format("svg");font-weight:400;font-style:normal}@keyframes _1GpxvABe{0%{opacity:0}to{opacity:1}}@keyframes ClAlvWcr{0%{opacity:1}to{opacity:0}}.ZdCaptWX{display:-ms-flexbox;display:flex;overflow:hidden;-ms-flex-pack:justify;justify-content:space-between;width:100%;-ms-flex-align:center;align-items:center}.Header-m__root__15XcQ{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;color:#fff;background-color:#333}.Header-m__link__2GEKH:hover{color:#4db3ff;background-color:#cde}.Header-m__link__2GEKH{min-width:140px;text-align:center;text-transform:uppercase;text-decoration:none;padding:18px;color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.Hero-m__root__12HF4{width:100vw;height:300px;background-size:cover;background-position:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;left:50%;right:50%;margin:0 -50vw 2rem;background-image:url(/assets/images/learn-dojo-jumbotron.jpg)}.Hero-m__description__3I4v5{margin-left:calc(5 * var(--grid-base));margin-top:calc(var(--grid-base));position:absolute;font-size:.8rem;top:0;color:#fff}.SignUp-m__root__1pvR6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.SignUp-m__title__2WSYN{margin-top:0}.SignUp-m__email__20Zk1{margin:90px 0 40px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Droid Sans,Helvetica Neue,Fira Sans,sans-serif}.SignUp-m__form__1C66N{background-color:#fff;border-radius:6px;-webkit-box-shadow:0 2px 15px 0 rgba(210,214,220,.5);box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.SignUp-m__gridcontainer__1Rne0{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%}.SignUp-m__column__1NIGa{padding:20px}.SignUp-m__gdpr__1Y92a{background-color:#f3f3f3}.SignUp-m__gdprcheck__2qi1q{display:block;padding-left:15px;text-indent:-15px}.SignUp-m__checkbox__1sBso{width:13px;height:13px;padding:0;margin:2px;vertical-align:bottom;position:relative;top:-1px;*overflow:hidden}.SignUp-m__info__3AU2H{margin:15px 0;font-size:.7rem}.SignUp-m__input__2oS1c{width:100%;border-radius:4px;color:#000;font-weight:400;background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:5px;-webkit-transition:border-color .3s ease-out;transition:border-color .3s ease-out}.SignUp-m__root__1pvR6 fieldset{border:0}.Layout-m__root__3l2TO{-webkit-box-shadow:rgba(0,0,0,.1) 0 4px 120px;box-shadow:0 4px 120px rgba(0,0,0,.1);grid-column:1/6;padding:0;overflow:hidden}.Layout-m__section__1sUgf{grid-column:2/auto;padding:0 9rem}@media only screen and (max-width:900px){.Layout-m__root__3l2TO{grid-column:1/6;padding:0}.Layout-m__root__3l2TO article img{display:block;max-width:500px;margin:0 auto}.Layout-m__section__1sUgf{grid-column:1/6;padding:0 2rem}}@media only screen and (max-width:480px){.Layout-m__root__3l2TO{grid-column:1/6;padding:0}.Layout-m__root__3l2TO article img{display:block;max-width:300px;margin:0 auto}.Layout-m__section__1sUgf{grid-column:1/6;padding:0}}/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */.Blog-m__root__1B0aR{padding:1.2rem}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}</style></head>
<body>
	<div id="root"><div class="Layout-m__root__3l2TO"><header><div class="ZdCaptWX Header-m__root__15XcQ toolbar-m__root__zQuGH"><div class="toolbar-m__title__3F385">learn dojo</div><div class="_5E9jF1Pb"><a class="Header-m__link__2GEKH" href="/">Home</a></div></div></header><div class="Hero-m__root__12HF4"><h3 class="Hero-m__description__3I4v5">byte by byte</h3></div><main class="Layout-m__section__1sUgf"><div class="Blog-m__root__1B0aR"><article class="Content-m__root__1ITm5"><img src="/assets/blog/dojo-containers.jpg"><a href="/building-static-site-with-dojo"><h2>Building a static site with dojo</h2></a><p>Rene Rubalcava | May 27, 2019</p><div><p>We've seen how you can use <a href="https://learn-dojo.com/dojo-from-the-blocks" target="_blank" rel="nofollow">dojo blocks</a> with <a href="https://learn-dojo.com/build-time-rendering-in-dojo" target="_blank" rel="nofollow">build-time-rendering</a> to create static web pages. This is pretty powerful, because it means you <em>could</em> build an entire website without having to back with API and database calls. Of course, this isn't ideal web applications that require dynamic data or handle authorization, but it is ideal for situations where the content is fairly static, like documentation or <a href="https://github.com/odoe/learn-dojo" target="_blank" rel="nofollow">this blog</a>! This is very much what something like <a href="https://www.gatsbyjs.org/" target="_blank" rel="nofollow">gatsby</a> is for. All the pieces to build a static site generator are there in dojo, you just need to put them together.</p>
<h2 id="parsing">Parsing</h2>
<p>I was heavily inspired by what the dojo team is doing with <a href="https://github.com/dojo/site" target="_blank" rel="nofollow">dojo/site</a> to statically build the pages for the next <a href="http://dojo.io/" target="_blank" rel="nofollow">dojo</a> documentation. I borrowed heavily from their blocks to parse markdown to virtual dom nodes as I found I was recreating the wheel.</p>
<p>My main goal for my static site generator was to parse markdown to pages, specifically blog pages. The core tools in this process are <a href="https://github.com/unifiedjs/unified" target="_blank" rel="nofollow">unified</a> and <a href="https://github.com/remarkjs/remark" target="_blank" rel="nofollow">remark</a>. If you have built sites with gatsby, you may be familiar with these as they are used heavily in gatsby plugins.</p>
<p>Here is a sample of the block used to parse markdown looks like.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// Converts markdown to VNodes in hyperscript</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">toVNodes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pipeline <span class="token operator">=</span> <span class="token function">unified</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>markdown <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> commonmark<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>externalLinks<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'_blank'</span><span class="token punctuation">,</span> rel<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'nofollow'</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>frontmatter<span class="token punctuation">,</span> <span class="token string">'yaml'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>remark2rehype<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>slug<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>rehypePrism<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> nodes <span class="token operator">=</span> pipeline<span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> pipeline<span class="token punctuation">.</span><span class="token method function property-access">runSync</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">toH</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>props<span class="token punctuation">,</span> key<span class="token punctuation">:</span> counter<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> children<span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>This block function uses <code>unified</code> parse a markdown file. The result of parsing this file is a <a href="https://github.com/syntax-tree/mdast" target="_blank" rel="nofollow">markdown abstract tree</a> that is then passed through a series of remark plugins to transform that markdown into a product that we can then parse to HTML with <a href="https://github.com/rehypejs/rehype" target="_blank" rel="nofollow">rehype</a> and some other rehype plugins. Once that is done, we can transform this product to hyperscript using <a href="https://github.com/syntax-tree/hast-to-hyperscript" target="_blank" rel="nofollow">hast-to-hyperscript</a> using the built in dojo virtual dom tooling to produce the needed nodes.</p>
<h2 id="routing">Routing</h2>
<p>I wasn't just building a static site generator for this blog. I was porting an existing wordpress blog to a static site. So I wanted to make sure that all the existing links out there would still work, so I had to mimic the existing structure. To do this, my routes look like this.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/{path}'</span><span class="token punctuation">,</span>
        outlet<span class="token punctuation">:</span> <span class="token string">'blog'</span><span class="token punctuation">,</span>
        defaultRoute<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>The root of the route would be <code>/</code> and blog posts links would go to <code>/{path}</code>. I wanted the home page to consist of a list of the blog posts with the published date and descriptions. So I made a card widget to display these.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Card</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CardProperties</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> date<span class="token punctuation">,</span> description<span class="token punctuation">,</span> path<span class="token punctuation">,</span> cover_image <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">root</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">column</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
                        <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span>
                        <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                            <span class="token comment">// markdown is a posts/ folder with extension .md</span>
                            <span class="token comment">// so clean that up</span>
                            path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'posts/'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'.md'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token function">dateFormatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
                        <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span>
                        <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                            path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'posts/'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'.md'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        READ MORE
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">column</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">image</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>cover_image<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token plain-text">
</span></code></pre>
<p>I'm using the metadata from each blog post to create these cards. I'm using a lot of the front matter for metadata that <a href="https://dev.to" target="_blank" rel="nofollow">dev.to</a> uses, because it will make it easier for me to cross-post there as well.</p>
<p>The result is a card that looks similar to this.</p>
<p><img src="/assets/blog/dojo-blog-card.png"></p>
<h2 id="templates">Templates</h2>
<p>Blog posts are represented as templates. In this case they can render in these card styles for the main page or as the entire blog post. The blog post template looks like this.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">BlogPost</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PostProperties</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> excerpt <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token string">'.md'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            path <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.md`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        <span class="token comment">// compile the blog post content</span>
        <span class="token keyword">const</span> post<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">meta</span><span class="token punctuation">(</span><span class="token maybe-class-name">Block</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span>compileBlogPost<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            path
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">dateFormatter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">date</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// if displayed as a card, just return the content in card format</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>excerpt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">post</span><span class="token punctuation">.</span><span class="token attr-value">meta</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
            <span class="token comment">// or return the content as a full blog post</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Content</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token punctuation">{</span><span class="token operator">!</span>excerpt <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">cover_image</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
                        <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span>
                        <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                            path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'posts/'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'.md'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>post<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token punctuation">{</span>post<span class="token punctuation">.</span><span class="token property-access">meta</span><span class="token punctuation">.</span><span class="token property-access">author</span><span class="token punctuation">}</span><span class="token plain-text"> | </span><span class="token punctuation">{</span>date<span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token punctuation">{</span>post<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Content</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token plain-text">
</span></code></pre>
<p>The results of this looks just like this blog.</p>
<h2 id="building">Building</h2>
<p>In order for the static pages to be built, I need to configure my <code>.dojorc</code> correctly with the routes to all my blog posts. Note that <code>"."</code> is how I can tell the dojo build-time-render to build a static index page.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"build-app"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"build-time-render"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"root"</span><span class="token punctuation">,</span>
            <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"build-time-rendering-in-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"building-a-simple-app-in-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"build-static-site-with-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"creating-a-datepicker-with-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"dojo-cli-template-app"</span><span class="token punctuation">,</span>
                <span class="token string">"dojo-containers"</span><span class="token punctuation">,</span>
                <span class="token string">"dojo-from-the-blocks"</span><span class="token punctuation">,</span>
                <span class="token string">"intro-to-the-dojo-registry"</span><span class="token punctuation">,</span>
                <span class="token string">"intro-to-the-dojo-router"</span><span class="token punctuation">,</span>
                <span class="token string">"maintain-state-with-dojo-stores"</span><span class="token punctuation">,</span>
                <span class="token string">"style-dojo-widgets"</span><span class="token punctuation">,</span>
                <span class="token string">"testing-with-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"up-and-running-with-dojo-cli"</span><span class="token punctuation">,</span>
                <span class="token string">"watch-for-property-changes-in-widgets"</span><span class="token punctuation">,</span>
                <span class="token string">"web-components-with-dojo"</span><span class="token punctuation">,</span>
                <span class="token string">"."</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"puppeteerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"--no-sandbox"</span><span class="token punctuation">,</span> <span class="token string">"--disable-setuid-sandbox"</span> <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>I'm planning on automating the updates of the <code>.dojorc</code> with a script that I can run before the build is run, but I haven't gotten that far yet.</p>
<p>Once it's been built, the result is a static website with subdirectories to each page I've built.</p>
<p><img src="/assets/blog/dojo-btr-built.png"></p>
<p>This means that even if someone is on a slow connection or the javascript doesn't load correctly, my site should still be visible, including the routes of my site.</p>
<h2 id="deployment">Deployment</h2>
<p>Since my site doesn't require making any API calls or rely on a server to do any server side rendering, it's fairly easy to deploy to any number of your favorite hosting services. For the record, I tried to deploy to <a href="https://zeit.co/" target="_blank" rel="nofollow">zeit</a> and <a href="https://www.netlify.com/" target="_blank" rel="nofollow">netlify</a> and they both appeared to work great at first. However, it looks like the subdirectories of my <code>dist</code> directory would not deploy, so links to pages other than the main page would not work. If I linked to a page from the main page, dojo routing worked fine, but when linked directly. I'm sure I just did not configure something correctly, but it wasn't clear to me what I didn't do right.</p>
<p>So at the end of the day, I deployed to <a href="https://aws.amazon.com/s3/" target="_blank" rel="nofollow">aws s3</a>. Although, s3 configuration isn't exactly <em>simple</em>, I know enough to drag and drop the folders over and I could even said up a pipeline from github. I'll probably need to add a <code>published</code> tag to my posts like <a href="https://dev.to/" target="_blank" rel="nofollow">dev.to</a> does so I an push posts in progress to github without deploying them with the rest of the site.</p>
<p>There is plenty more I want to do with this project going forward!</p>
<h2 id="for-web-apps">For web apps</h2>
<p>My blog is not a full blown web application, but that doesn't mean you can't take the same static site generating tools of dojo to build a <em>mostly</em> static site that will also fetch data from external sources and use them both to build powerful web applications. The static site generating tools are just one piece of a larger system of powerful features built in to dojo.</p>
<h2 id="try-it-yourself">Try it yourself</h2>
<p>If you want to try this dojo static site generator out yourself, you can quickly get started the following command.</p>
<pre class="language-bash"><code class="language-bash">npx degit odoe/btr-site my-awesome-site
</code></pre>
<p>You can check out this starter project on <a href="https://github.com/odoe/btr-site" target="_blank" rel="nofollow">github</a>!</p>
<h2 id="summary">Summary</h2>
<p>I've had a lot of fun putting this project together and learned a lot about how unified, remark, rehype, and other plugins work, as well as how to really use dojo blocks to do some interesting things. I may not have all the bells and whistles of wordpress, but I don't think I fully need them. Anything substantial that wordpress could tell me, I can get from google analytics and I'm much more comfortable just publishing in markdown anyway. It also won't hurt to save a few bucks on that digital ocean bill :)</p></div></article></div></main><aside class="SignUp-m__root__1pvR6"><div class="SignUp-m__email__20Zk1"><form class="SignUp-m__form__1C66N" action="https://odoe.us9.list-manage.com/subscribe/post?u=711bff655927baa32886103d5&amp;id=6d978f8bcf" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank"><div class="SignUp-m__gridcontainer__1Rne0"><div class="SignUp-m__column__1NIGa SignUp-m__gdpr__1Y92a"><h3 class="SignUp-m__title__2WSYN"><strong>Subscribe to newsletter</strong></h3><div class="SignUp-m__info__3AU2H"><div><label>Marketing Permissions</label><p>Please select all the ways you would like to hear from odoenet:</p><fieldset name="interestgroup_field"><label class="SignUp-m__gdprcheck__2qi1q" for="gdpr_7561"><input type="checkbox" id="gdpr_7561" name="gdpr[7561]" value="Y" class="SignUp-m__checkbox__1sBso"><span>Email</span> </label></fieldset><p>You can unsubscribe at any time by clicking the link in the footer of our emails. For information about our privacy practices, please visit our website.</p></div></div></div><div class="SignUp-m__column__1NIGa"><div><input placeholder="Your email" type="email" name="EMAIL" class="SignUp-m__input__2oS1c" id="mce-EMAIL"></div><div><input placeholder="Your first name" type="text" name="FNAME" class="SignUp-m__input__2oS1c" id="mce-FNAME"></div><button class="button-m__root__12yR4" type="submit">Submit</button><div class="SignUp-m__info__3AU2H"><p>We use Mailchimp as our marketing platform. By clicking below to subscribe, you acknowledge that your information will be transferred to Mailchimp for processing. <a href="https://mailchimp.com/legal/" target="_blank">Learn more about Mailchimp's privacy practices here.</a></p></div></div></div></form></div></aside><footer class="Footer-m__root__1zPMX"><span> 2019 odoenet</span><br><a href="https://github.com/odoe/learn-dojo" target="_blank">github</a><br><a href="https://dojo.io/" target="_blank">powered by @dojo</a><br><span class="Footer-m__details__2pZwP">Last build: 5/28/2019</span></footer></div></div>
<script>
window.__public_path__ = window.location.pathname.replace(/building-static-site-with-dojo(\/)?/, '');
</script><link rel="stylesheet" href="../bootstrap.364dab48b530476722a0.bundle.css" media="none" onload="if(media!='all')media='all'" /><script type="text/javascript" src="../bootstrap.c0f223f8f95aea33e14a.bundle.js"></script></body>
</html>
