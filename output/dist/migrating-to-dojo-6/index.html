<!DOCTYPE html>
<html lang="en-us">
<head><base href="/">
  <title>learn dojo</title>
  <meta charset="utf-8">
	<meta name="theme-color" content="#009dff">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="learn dojo - byte by byte">
	<link rel="icon" href="/assets/favicon.ico" />
	<link rel="stylesheet" type="text/css" href="prism.1_inztFX.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-56544808-7');
	</script>
<meta name="apple-mobile-web-app-title" content="learn-dojo" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="apple-mobile-web-app-status-bar-style" content="default" /><meta name="theme-color" content="#009dff" /><link rel="apple-touch-icon" sizes="512x512" href="icon_512x512.ca45ef50142a78ad4bd2d28215f15034.png" /><link rel="apple-touch-icon" sizes="256x256" href="icon_256x256.7da342a93e078e9a7fef21fa5d9dbbaf.png" /><link rel="apple-touch-icon" sizes="128x128" href="icon_128x128.811bfb9a7c545c93ad37790968688f24.png" /><link rel="manifest" href="manifest.83b2d52a04a4315afec956b410eaacf0.json" /><script>window.__app_base__ = '/'</script><meta name="mobile-web-app-capable" content="yes"><style>@import url(https://fonts.googleapis.com/css?family=Montserrat&display=swap);html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6666666666666667 Georgia,Cambria,serif;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:scroll}*{-webkit-box-sizing:inherit;box-sizing:inherit}:before{-webkit-box-sizing:inherit;box-sizing:inherit}:after{-webkit-box-sizing:inherit;box-sizing:inherit}body{color:rgba(0,0,0,.87);font-family:Georgia,Cambria,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;padding:0;margin:0 0 1.66667rem}h1{font-size:2rem}h1,h2{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.51572rem}h3{font-size:1.31951rem}h3,h4{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.87055rem}h5,h6{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.81225rem;font-style:italic}hgroup{padding:0;margin:0 0 1.66667rem}ul{list-style-position:outside;list-style-image:none;list-style:disc}ol,ul{padding:0;margin:0 0 1.66667rem 1.66667rem}ol{list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.66667rem}pre{font-size:.85rem}pre,table{padding:0;margin:0 0 1.66667rem;line-height:1.66667rem}table{font-size:1rem;border-collapse:collapse;width:100%}fieldset{padding:0}blockquote,fieldset{margin:0 0 1.66667rem}blockquote{padding:.83333rem .83333rem .83333rem 1.45833rem;font-size:1.1487rem;line-height:1.66667rem;background:rgba(0,0,0,.03);color:rgba(0,0,0,.69);border-left:.20833rem solid rgba(0,0,0,.2)}form,iframe,noscript{padding:0;margin:0 0 1.66667rem}hr{padding:0;margin:0 0 calc(1.66667rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.66667rem}b,dt,strong,th{font-weight:700}li{margin-bottom:calc(1.66667rem / 2)}ol li,ul li{padding-left:0}li>ol{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}li>ul{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}blockquote :last-child{margin-bottom:0}li :last-child{margin-bottom:0}p :last-child{margin-bottom:0}li>p{margin-bottom:calc(1.66667rem / 2)}code,kbd,samp{font-size:.85rem;line-height:1.66667rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.83333rem 1.11111rem calc(.83333rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}a{color:#07e;text-decoration:none}a:active,a:hover{color:#e32}blockquote>:last-child{margin-bottom:0}blockquote cite{font-size:1rem;line-height:1.66667rem;color:rgba(0,0,0,.87);font-weight:400}blockquote cite:before{content:"\2014   "}@media only screen and (max-width:480px){ol,ul{margin-left:1.66667rem}blockquote{margin-left:-1.25rem;margin-right:-1.25rem;padding-left:1.14583rem;padding-right:1.25rem}}h1,h2,h3,h4,h5,h6{margin-top:3.33333rem}body{margin:0;padding:0;color:rgba(46,46,46,.95)}header{font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}article img{display:block;max-width:500px;margin:0 auto}code[class*=language-],pre[class*=language-]{font-size:14px}@media only screen and (max-width:480px){article img{display:block;max-width:300px;margin:0 auto}}.button-m__root__12yR4,.button-m__root__12yR4 *,.button-m__root__12yR4:after,.button-m__root__12yR4:before{-webkit-box-sizing:border-box;box-sizing:border-box}.button-m__root__12yR4{background-color:#fff;background-color:var(--color-background);border:1px solid #d6dde2;border:var(--border-width) solid var(--color-border);color:#006be6;color:var(--color-highlight);cursor:pointer;display:inline-block;font-size:16px;font-size:var(--font-size-base);font-weight:700;line-height:24px;line-height:var(--line-height-base);min-width:calc(8px * 20);min-width:calc(var(--grid-base) * 20);padding:8px;padding:var(--spacing-regular);-webkit-transition:-webkit-box-shadow .25s ease;transition:-webkit-box-shadow .25s ease;transition:box-shadow .25s ease;transition:box-shadow .25s ease,-webkit-box-shadow .25s ease;-webkit-transition:-webkit-box-shadow var(--transition-duration) var(--transition-easing);transition:-webkit-box-shadow var(--transition-duration) var(--transition-easing);transition:box-shadow var(--transition-duration) var(--transition-easing);transition:box-shadow var(--transition-duration) var(--transition-easing),-webkit-box-shadow var(--transition-duration) var(--transition-easing);margin:0}.button-m__root__12yR4:focus,.button-m__root__12yR4:hover{border-color:#006be6;border-color:var(--color-highlight);-webkit-box-shadow:0 2px 2px 0 rgba(0,107,230,.2);box-shadow:0 2px 2px 0 rgba(0,107,230,.2);-webkit-box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);outline:none}.button-m__root__12yR4:focus .button-m__addon__1vLjS,.button-m__root__12yR4:hover .button-m__addon__1vLjS{border-left-color:#006be6;border-left-color:var(--color-highlight)}@-webkit-keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@-webkit-keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@font-face{font-family:dojo2BaseTheme;src:url(4320b561bf6b259b0082d83d4848daf9.3VSAx8ft.ttf) format("truetype"),url(a302b51c64828d7c0aaf95c1cfa4daad.2JSGjfMp.woff) format("woff"),url(79b71beaafd0e1d0897d414fa6b1f796.2mZX6CjQ.svg#dojo2) format("svg");font-weight:400;font-style:normal}@-webkit-keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}@keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}:root{--tab-width:calc(var(--grid-base) * 16)}:root{--grid-base:8px;--spacing-regular:var(--grid-base);--spacing-large:calc(var(--grid-base) * 2);--touch-target-min:48px;--font-size-base:16px;--font-size-small:14px;--font-size-title:20px;--font-size-icon:24px;--line-height-base:24px;--color-dark:#333;--color-text-primary:#000;--color-text-faded:#5c6c7c;--color-text-inverted:#fff;--color-highlight:#006be6;--color-highlight-border:#298dff;--color-success:#188701;--color-error:#eb1313;--color-background:#fff;--color-background-inverted:#5c6c7c;--color-background-faded:#f4f6f7;--color-border:#d6dde2;--color-border-strong:#5c6c7c;--color-border-invalid:#f7c4c4;--color-border-valid:#bcefb1;--color-box-shadow:rgba(0,0,0,0.2);--color-box-shadow-highlight:rgba(0,107,230,0.2);--color-box-shadow-strong:rgba(0,0,0,0.5);--color-box-shadow-focus:rgba(0,107,230,0.2);--color-box-shadow-invalid:rgba(235,19,19,0.2);--color-box-shadow-valid:rgba(24,135,1,0.2);--box-shadow-dimensions-small:0 2px 2px 0;--box-shadow-dimensions-large:0 9px 16px 0;--border-width:1px;--border-width-emphasized:2px;--border-radius:4px;--transition-duration:0.25s;--transition-easing:ease;--zindex-base:0;--zindex-tooltip:100;--zindex-dropdown:200;--zindex-fixed:300;--zindex-dialog:400;--zindex-alert:500}.Blog-m__root__1B0aR{padding:1.2rem}.Footer-m__root__1zPMX{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;padding:3rem 1rem;overflow:hidden}.Footer-m__details__2pZwP{font-size:.75rem}.Header-m__root__15XcQ{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;color:#fff;background-color:#333;padding:1rem}.Header-m__title__3OSiY{font-size:20px;margin:0;font-weight:400}.Header-m__link__2GEKH:hover{color:#fff;background-color:#333}.Header-m__link__2GEKH{min-width:140px;text-align:center;text-decoration:none;padding:18px;color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.Hero-m__root__12HF4{width:100vw;height:300px;background-size:cover;background-position:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;left:50%;right:50%;margin:0 -50vw 2rem;background-image:url(/assets/images/learn-dojo-jumbotron.jpg)}.Hero-m__description__3I4v5{margin-left:calc(5 * var(--grid-base));margin-top:calc(var(--grid-base));position:absolute;font-size:.8rem;top:0;color:#fff}@font-face{font-family:dojo2;src:url(dojo2.1jRzby-N.ttf) format("truetype"),url(dojo2.6KF-s-BX.woff) format("woff"),url(dojo2.1LTNJcFj.svg#dojo2) format("svg");font-weight:400;font-style:normal}.SignUp-m__root__1pvR6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.SignUp-m__title__2WSYN{margin-top:0}.SignUp-m__email__20Zk1{margin:90px 0 40px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Droid Sans,Helvetica Neue,Fira Sans,sans-serif}.SignUp-m__form__1C66N{background-color:#fff;border-radius:6px;-webkit-box-shadow:0 2px 15px 0 rgba(210,214,220,.5);box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.SignUp-m__gridcontainer__1Rne0{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%}.SignUp-m__column__1NIGa{padding:20px}.SignUp-m__gdpr__1Y92a{background-color:#f3f3f3}.SignUp-m__gdprcheck__2qi1q{display:block;padding-left:15px;text-indent:-15px}.SignUp-m__checkbox__1sBso{width:13px;height:13px;padding:0;margin:2px;vertical-align:bottom;position:relative;top:-1px;*overflow:hidden}.SignUp-m__info__3AU2H{margin:15px 0;font-size:.7rem}.SignUp-m__input__2oS1c{width:100%;border-radius:4px;color:#000;font-weight:400;background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:5px;-webkit-transition:border-color .3s ease-out;transition:border-color .3s ease-out}.SignUp-m__fieldset__2wCAE{border:0}.Layout-m__root__3l2TO{-webkit-box-shadow:rgba(0,0,0,.1) 0 4px 120px;box-shadow:0 4px 120px rgba(0,0,0,.1);grid-column:1/6;padding:0;overflow:hidden}.Layout-m__section__1sUgf{grid-column:2/auto;padding:0 9rem}@media only screen and (max-width:900px){.Layout-m__root__3l2TO{grid-column:1/6;padding:0}.Layout-m__section__1sUgf{grid-column:1/6;padding:0 2rem}}@media only screen and (max-width:480px){.Layout-m__root__3l2TO,.Layout-m__section__1sUgf{grid-column:1/6;padding:0}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}</style></head>
<body>
	<div id="root"><div class="Layout-m__root__3l2TO"><header class="Header-m__root__15XcQ"><div class="Header-m__title__3OSiY"><a class="Header-m__link__2GEKH" href="/">learn dojo</a></div></header><div class="Hero-m__root__12HF4"><h3 class="Hero-m__description__3I4v5">byte by byte</h3></div><main class="Layout-m__section__1sUgf"><div class="Blog-m__root__1B0aR"><section><img src="/assets/blog/dojo-migrate-dojo6.jpg"><article class="Article-m__root__1D5nz"><a href="migrating-to-dojo-6"><h2>Migrating learn-dojo to Dojo 6</h2></a><p>Rene Rubalcava | August 15, 2019</p><div><p>The latest release of <a href="https://dojo.io/" target="_blank" rel="nofollow">Dojo 6</a> brings with it some major updates to how you can build apps with Dojo. Some files have moved, but I think one of the biggest new features available to developers is the use of functional widgets. This doesn't mean you can't continue to use class based widgets, but there are some nice advantages to using functional widgets.</p>
<p>In case you didn't know, <a href="https://learn-dojo.com" target="_blank" rel="nofollow">learn-dojo</a> is a static site, <a href="https://learn-dojo.com/building-static-site-with-dojo" target="_blank" rel="nofollow">built with Dojo</a>. So as Dojo 6 development was ongoing, I was already looking at what I would need to do to migrate the site to the latest Dojo.</p>
<h2 id="updates-to-widgets">Updates to Widgets</h2>
<p>Let's take a look at a basic <a href="https://github.com/odoe/learn-dojo/blob/df41818497429706e235c7b39437abb5ed4ee3b5/src/widgets/header/Header.tsx" target="_blank" rel="nofollow">Header</a> widget, that accepts properties to display the title and and links to the main page.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/widgets/header/Header.tsx</span>
<span class="token keyword">import</span> <span class="token maybe-class-name">WidgetBase</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/widget-core/tsx'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token maybe-class-name">Link</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/routing/Link'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">'./Header.m.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span> <span class="token operator">||</span> <span class="token string">'My Site'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">isOutlet</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">link</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This widget takes an object with a <code>title</code> that is a <code>string</code> as it's property. This isn't a complicated widget, Now, when we convert it to a functional widget, not much is going to change in terms of what is being rendered, but there are some slight differences.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// converted to Dojo 6</span>
<span class="token comment">// src/widgets/header/Header.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> tsx<span class="token punctuation">,</span> create <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/core/vdom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token maybe-class-name">Link</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/routing/Link'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">'./Header.m.css'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> properties <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'My Site'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">isOutlet</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">link</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>First of all, the folder <code>widget-core</code> ha been renamed to <code>core</code> in <code>@dojo/framework</code>. This is just a organizational change to Dojo. But the other new one is the use of this <code>create</code> module. The <code>create</code> module that lets you create a factory method for your render function.</p>
<p>To create a basic factory render function you could just do something like this.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// return a render factory</span>
<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">MyBasicWidget</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Everything is awesome!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>But the <code>Header</code> widget requires some properties, so we can tell the render factory that properties are expected and we can type them.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now in the factory method, it will be pass a <code>properties()</code> method that will provide the passed properties to the widget.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> properties <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'My Site'</span><span class="token punctuation">;</span>
  <span class="token spread operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Why is <code>properties</code> a function and not just an object? This has to do with some other features of functional widgets that allow middleware to be used. This ensures that you don't get stale values from the passed properties. </p>
<p><em>We'll cover the new middleware capabilities in more detail in in a future blog post</em>.</p>
<p>The rest of this widget looks like the previous version returning JSX vdom.</p>
<p>It is normally recommended that you provide <em>named</em> render methods to the render factory as it will help you track down errors in debugging, but it isn't required. <em>Sometimes you just need to live on the edge</em>.</p>
<h2 id="basic-middleware">Basic Middleware</h2>
<p>One of the stand out features of Dojo is the use of <a href="https://learn-dojo.com/dojo-from-the-blocks" target="_blank" rel="nofollow">blocks</a> that let you run code in node when you use build time rendering. It's critical in how learn-dojo is built because blocks are used to parse the posts from markdown, and run various tooling for code blocks, and formatting. In class based widgets, this is done via the use metas.</p>
<p>Here is how a blog page is rendered with a class based widget.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/pages/Blog.tsx</span>
<span class="token keyword">import</span> <span class="token maybe-class-name">WidgetBase</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token maybe-class-name">Block</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/widget-core/meta/Block'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/widget-core/tsx'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> compileBlogIndex <span class="token keyword">from</span> <span class="token string">'../blocks/compile-blog-index.block'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token maybe-class-name">Post</span> <span class="token keyword">from</span> <span class="token string">'../templates/blog-post/BlogPost'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">'./Blog.m.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  standalone<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  path<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> standalone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">;</span>
    <span class="token comment">// run the block as a meta</span>
    <span class="token keyword">const</span> blogs<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">meta</span><span class="token punctuation">(</span><span class="token maybe-class-name">Block</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span>compileBlogIndex<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// render blog excerpts or single blog post</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token operator">!</span>standalone
          <span class="token operator">?</span> blogs <span class="token operator">&amp;&amp;</span>
            blogs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">[</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token attr-name">excerpt</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">:</span> undefined<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span>path <span class="token operator">&amp;&amp;</span> path<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Let's dive right into how this looks as a functional widget in Dojo 6.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// converted to Dojo 6</span>
<span class="token comment">// src/pages/Blog.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> tsx<span class="token punctuation">,</span> create <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/framework/core/vdom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> block <span class="token keyword">from</span> <span class="token string">'@dojo/framework/core/middleware/block'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> compileBlogIndex <span class="token keyword">from</span> <span class="token string">'../blocks/compile-blog-index.block'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token maybe-class-name">Post</span> <span class="token keyword">from</span> <span class="token string">'../templates/blog-post/BlogPost'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">'./Blog.m.css'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> block <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> standalone<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> path<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> middleware<span class="token punctuation">:</span> <span class="token punctuation">{</span> block <span class="token punctuation">}</span><span class="token punctuation">,</span> properties <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> standalone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> blogs<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token function">block</span><span class="token punctuation">(</span>compileBlogIndex<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">root</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token operator">!</span>standalone <span class="token operator">?</span> <span class="token punctuation">(</span>
        blogs <span class="token operator">&amp;&amp;</span>
        blogs<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blog<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">[</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token attr-name">excerpt</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>blog<span class="token punctuation">.</span><span class="token property-access">file</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
        undefined
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>path <span class="token operator">&amp;&amp;</span> path<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>path<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>To use this in a render factory method, pass the block middleware to the <code>create</code> method so that it's available to your render factory.</p>
<p>Anything you pass into the create() method will be available to your render factory methods as middleware.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> block <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> standalone<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> path<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// render factory</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> middleware<span class="token punctuation">:</span> <span class="token punctuation">{</span> block <span class="token punctuation">}</span><span class="token punctuation">,</span> properties <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now the <code>block</code> is available on the <code>middleware</code> property passed to the render factory method.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> blogs<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token function">block</span><span class="token punctuation">(</span>compileBlogIndex<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Notice that now, you can run the middleware block independently of any <code>meta</code> helpers like in a class based method. This is one of my favorite features of the new functional widgets!</p>
<h2 id="composable-widgets">Composable Widgets</h2>
<p>The learn-dojo site takes advantage of the ability to create wrapper widgets that renders any children provided to it. This is used in something like the <a href="https://github.com/odoe/learn-dojo/blob/df41818497429706e235c7b39437abb5ed4ee3b5/src/layouts/Layout.tsx" target="_blank" rel="nofollow"><code>Layout</code></a> widget.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/layouts/Layout.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Layout</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SiteMeta</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> description<span class="token punctuation">,</span> author<span class="token punctuation">,</span> footerLinks <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hero</span></span> <span class="token attr-name">description</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* render the children */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">section</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SignUp</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        &lt;Footer </span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">{</span> author<span class="token punctuation">,</span> footerLinks <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text"> /&gt;
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token plain-text">
</span></code></pre>
<p>Like the update to make <code>properties</code> a function so you always have the latest values, the same is true for <code>children</code>.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// converted to Dojo 6</span>
<span class="token comment">// src/layouts/Layout.tsx</span>
<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SiteMeta</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">();

export default factory(({ children, properties }) =&gt; </span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> description<span class="token punctuation">,</span> author<span class="token punctuation">,</span> footerLinks <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">root</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hero</span></span> <span class="token attr-name">description</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>description<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* render the children */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span> css<span class="token punctuation">.</span><span class="token property-access">section</span> <span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SignUp</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      &lt;Footer </span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">{</span> author<span class="token punctuation">,</span> footerLinks <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text"> /&gt;
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">);
</span></code></pre>
<p>That's the only change in regards to rendering children in your widgets.</p>
<h2 id="summary">Summary</h2>
<p>Dojo 6 is a significant release in the Dojo roadmap, offering some exciting new capabilities in build reactive widgets for your applications. There are plenty more new features not covered in this blog post that will be discussed in the future.</p>
<p>I was able to migrate learn-dojo in a single morning based off the Dojo 6 alpha and updated documentation. I am very impressed with the new functional widget pattern in Dojo and use of middleware that we barely scratched the surface of in this post.</p>
<p>Stay tuned for more!</p></div></article></section></div></main><aside class="SignUp-m__root__1pvR6"><div class="SignUp-m__email__20Zk1"><form class="SignUp-m__form__1C66N" action="https://odoe.us9.list-manage.com/subscribe/post?u=711bff655927baa32886103d5&amp;id=6d978f8bcf" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank"><div class="SignUp-m__gridcontainer__1Rne0"><div class="SignUp-m__column__1NIGa SignUp-m__gdpr__1Y92a"><h3 class="SignUp-m__title__2WSYN"><strong>Subscribe to newsletter</strong></h3><div class="SignUp-m__info__3AU2H"><div><label>Marketing Permissions</label><p>Please select all the ways you would like to hear from odoenet:</p><fieldset class="SignUp-m__fieldset__2wCAE" name="interestgroup_field"><label class="SignUp-m__gdprcheck__2qi1q" for="gdpr_7561"><input type="checkbox" id="gdpr_7561" name="gdpr[7561]" value="Y" class="SignUp-m__checkbox__1sBso"><span>Email</span> </label></fieldset><p>You can unsubscribe at any time by clicking the link in the footer of our emails. For information about our privacy practices, please visit our website.</p></div></div></div><div class="SignUp-m__column__1NIGa"><div><input placeholder="Your email" type="email" name="EMAIL" class="SignUp-m__input__2oS1c" id="mce-EMAIL"></div><div><input placeholder="Your first name" type="text" name="FNAME" class="SignUp-m__input__2oS1c" id="mce-FNAME"></div><button class="button-m__root__12yR4" type="submit">Submit</button><div class="SignUp-m__info__3AU2H"><p>We use Mailchimp as our marketing platform. By clicking below to subscribe, you acknowledge that your information will be transferred to Mailchimp for processing. <a href="https://mailchimp.com/legal/" target="_blank">Learn more about Mailchimp's privacy practices here.</a></p></div></div></div></form></div></aside><footer class="Footer-m__root__1zPMX"><span>© 2019, odoenet</span><br><a href="https://github.com/odoe/learn-dojo" target="_blank">github</a><br><a href="https://dojo.io/" target="_blank">powered by @dojo</a><br><a href="/atom.xml">rss feed</a><br><span class="Footer-m__details__2pZwP">Last build: 8/27/2019</span></footer></div></div>
<script>
	window.__public_path__ = window.location.pathname.replace(/(\/)?migrating-to-dojo-6(\/)?$/, '/');
</script><link rel="stylesheet" href="bootstrap.889658ec741c39d3aefb.bundle.css" /><link rel="preload" href="prism.1_inztFX.css" as="style"><link rel="preload" href="main.ae03610e94b98ac4707b.bundle.css" as="style"><script src="bootstrap.091b617ec97dbca49e07.bundle.js"></script><script type="text/javascript" src="runtime/block-c1325f13fa4400d4e34d.252e78d7ac0ef7a3a696.bundle.js"></script><script type="text/javascript" src="runtime/block-7e5cd449c98fdc3f5f9b.155745a0d48e4c8fe11d.bundle.js"></script><link rel="preload" href="https://www.google-analytics.com/analytics.js" as="script"><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7" as="script"><link rel="preload" href="runtime/blocks.ea6e1de1b46c50a0f5d4.bundle.js" as="script"><link rel="preload" href="main.9ba75550f89c7ec28ece.bundle.js" as="script"></body>
</html>
