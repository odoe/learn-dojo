<!DOCTYPE html>
<html lang="en-us">
<head><base href="/">
  <title>learn dojo</title>
  <meta charset="utf-8">
	<meta name="theme-color" content="#009dff">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="learn dojo - byte by byte">
	<link rel="icon" href="/assets/favicon.ico" />
	<link rel="stylesheet" type="text/css" href="prism.1_inztFX.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-56544808-7');
	</script>
<meta name="apple-mobile-web-app-title" content="learn-dojo" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="apple-mobile-web-app-status-bar-style" content="default" /><meta name="theme-color" content="#009dff" /><link rel="apple-touch-icon" sizes="512x512" href="icon_512x512.ca45ef50142a78ad4bd2d28215f15034.png" /><link rel="apple-touch-icon" sizes="256x256" href="icon_256x256.7da342a93e078e9a7fef21fa5d9dbbaf.png" /><link rel="apple-touch-icon" sizes="128x128" href="icon_128x128.811bfb9a7c545c93ad37790968688f24.png" /><link rel="manifest" href="manifest.83b2d52a04a4315afec956b410eaacf0.json" /><script>
	if (!window['learn_dojo']) {
		window['learn_dojo'] = {}
	}
	window['learn_dojo'].base = '/'</script><script>
		if ('serviceWorker' in window.navigator) {
			window.addEventListener('load', function() {
				window.navigator.serviceWorker.register('service-worker.js');
			});
		}
	</script><meta name="mobile-web-app-capable" content="yes"><style>@import url(https://fonts.googleapis.com/css?family=Montserrat&display=swap);html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6666666666666667 Georgia,Cambria,serif;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:scroll}*{-webkit-box-sizing:inherit;box-sizing:inherit}:before{-webkit-box-sizing:inherit;box-sizing:inherit}:after{-webkit-box-sizing:inherit;box-sizing:inherit}body{color:rgba(0,0,0,.87);font-family:Georgia,Cambria,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;padding:0;margin:0 0 1.66667rem}h1{font-size:2rem}h1,h2{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.51572rem}h3{font-size:1.31951rem}h3,h4{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.87055rem}h5,h6{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.81225rem;font-style:italic}hgroup{padding:0;margin:0 0 1.66667rem}ul{list-style-position:outside;list-style-image:none;list-style:disc}ol,ul{padding:0;margin:0 0 1.66667rem 1.66667rem}ol{list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.66667rem}pre{font-size:.85rem}pre,table{padding:0;margin:0 0 1.66667rem;line-height:1.66667rem}table{font-size:1rem;border-collapse:collapse;width:100%}fieldset{padding:0}blockquote,fieldset{margin:0 0 1.66667rem}blockquote{padding:.83333rem .83333rem .83333rem 1.45833rem;font-size:1.1487rem;line-height:1.66667rem;background:rgba(0,0,0,.03);color:rgba(0,0,0,.69);border-left:.20833rem solid rgba(0,0,0,.2)}form,iframe,noscript{padding:0;margin:0 0 1.66667rem}hr{padding:0;margin:0 0 calc(1.66667rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.66667rem}b,dt,strong,th{font-weight:700}li{margin-bottom:calc(1.66667rem / 2)}ol li,ul li{padding-left:0}li>ol{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}li>ul{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}blockquote :last-child{margin-bottom:0}li :last-child{margin-bottom:0}p :last-child{margin-bottom:0}li>p{margin-bottom:calc(1.66667rem / 2)}code,kbd,samp{font-size:.85rem;line-height:1.66667rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.83333rem 1.11111rem calc(.83333rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}a{color:#07e;text-decoration:none}a:active,a:hover{color:#e32}blockquote>:last-child{margin-bottom:0}blockquote cite{font-size:1rem;line-height:1.66667rem;color:rgba(0,0,0,.87);font-weight:400}blockquote cite:before{content:"\2014   "}@media only screen and (max-width:480px){ol,ul{margin-left:1.66667rem}blockquote{margin-left:-1.25rem;margin-right:-1.25rem;padding-left:1.14583rem;padding-right:1.25rem}}h1,h2,h3,h4,h5,h6{margin-top:3.33333rem}body{margin:0;padding:0;color:rgba(46,46,46,.95)}header{font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}article img{display:block;max-width:500px;margin:0 auto}code[class*=language-],pre[class*=language-]{font-size:14px}@media only screen and (max-width:480px){article img{display:block;max-width:300px;margin:0 auto}}.Blog-m__root__5737d01B0aR{padding:1.2rem}.Footer-m__root__5737d01zPMX{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;padding:3rem 1rem;overflow:hidden}.Footer-m__details__5737d02pZwP{font-size:.75rem}.Footer-m__logo__5737d02kD38{max-height:48px}.Footer-m__link__5737d03-JoA,.Footer-m__link__5737d03-JoA:visited{color:#003866}.Header-m__root__5737d015XcQ{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;color:#fff;background-color:#333;padding:1rem}.Header-m__title__5737d03OSiY{font-size:20px;margin:0;font-weight:400}.Header-m__link__5737d02GEKH:hover{color:#fff;background-color:#333}.Header-m__link__5737d02GEKH{min-width:140px;text-align:center;text-decoration:none;padding:18px;color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}:root{--grid-base:8px}.Hero-m__root__5737d012HF4{width:100vw;height:300px;max-height:300px;display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;left:50%;right:50%;margin:0 -50vw 2rem}.Hero-m__image__5737d02nrHx{width:100vw;height:300px;-o-object-fit:cover;object-fit:cover}.Hero-m__description__5737d03I4v5{margin-left:calc(5 * 8px);margin-left:calc(5 * var(--grid-base));margin-top:calc(8px);margin-top:calc(var(--grid-base));position:absolute;font-size:.8rem;top:0;color:#fff}.SignUp-m__root__5737d01pvR6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.SignUp-m__title__5737d02WSYN{margin-top:0}.SignUp-m__email__5737d020Zk1{margin:90px 0 40px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Droid Sans,Helvetica Neue,Fira Sans,sans-serif}.SignUp-m__form__5737d01C66N{background-color:#fff;border-radius:6px;-webkit-box-shadow:0 2px 15px 0 rgba(210,214,220,.5);box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.SignUp-m__gridcontainer__5737d01Rne0{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%}.SignUp-m__column__5737d01NIGa{padding:20px}.SignUp-m__info__5737d03AU2H{margin:15px 0;font-size:.7rem}.SignUp-m__input__5737d02oS1c{width:100%;border-radius:4px;color:#000;font-weight:400;background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:5px;-webkit-transition:border-color .3s ease-out;transition:border-color .3s ease-out}.SignUp-m__link__5737d03d58p{color:#003866}.SignUp-m__submit__5737d02mNG6{color:#003866;text-decoration:none;background:#fff;padding:10px;border:2px solid #494949;display:inline-block;-webkit-transition:all .4s ease 0s;transition:all .4s ease 0s;cursor:pointer}.SignUp-m__submit__5737d02mNG6:hover{color:#fff;background:#003866;border-color:#003866;-webkit-transition:all .4s ease 0s;transition:all .4s ease 0s}.Layout-m__root__5737d03l2TO{-webkit-box-shadow:rgba(0,0,0,.1) 0 4px 120px;box-shadow:0 4px 120px rgba(0,0,0,.1);grid-column:1/6;padding:0;overflow:hidden}.Layout-m__section__5737d01sUgf{grid-column:2/auto;padding:0 9rem}@media only screen and (max-width:900px){.Layout-m__root__5737d03l2TO{grid-column:1/6;padding:0}.Layout-m__section__5737d01sUgf{grid-column:1/6;padding:0 2rem}}@media only screen and (max-width:480px){.Layout-m__root__5737d03l2TO,.Layout-m__section__5737d01sUgf{grid-column:1/6;padding:0}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}</style></head>
<body>
	<div id="root"><div class="Layout-m__root__5737d03l2TO"><header class="Header-m__root__5737d015XcQ"><div class="Header-m__title__5737d03OSiY"><a class="Header-m__link__5737d02GEKH" href="/">learn dojo</a></div></header><div class="Hero-m__root__5737d012HF4"><picture><source type="image/webp" srcset="
        /assets/images/learn-dojo-jumbotron-320.webp 320w,
        /assets/images/learn-dojo-jumbotron-640.webp 640w,
        /assets/images/learn-dojo-jumbotron-768.webp 768w,
        /assets/images/learn-dojo-jumbotron-1024.webp 1024w,
        /assets/images/learn-dojo-jumbotron-1366.webp 1366w,
        /assets/images/learn-dojo-jumbotron-1600.webp 1600w,
        /assets/images/learn-dojo-jumbotron-1920.webp 1920w
      "><source type="image/jpeg" srcset="
        /assets/images/learn-dojo-jumbotron-320.jpg 320w,
        /assets/images/learn-dojo-jumbotron-640.jpg 640w,
        /assets/images/learn-dojo-jumbotron-768.jpg 768w,
        /assets/images/learn-dojo-jumbotron-1024.jpg 1024w,
        /assets/images/learn-dojo-jumbotron-1366.jpg 1366w,
        /assets/images/learn-dojo-jumbotron-1600.jpg 1600w,
        /assets/images/learn-dojo-jumbotron-1920.jpg 1920w
      "><img alt="byte by byte" loading="lazy" class="Hero-m__image__5737d02nrHx" src="/assets/images/learn-dojo-jumbotron-lg.jpg"></picture><h3 class="Hero-m__description__5737d03I4v5">byte by byte</h3></div><main class="Layout-m__section__5737d01sUgf"><div class="Blog-m__root__5737d01B0aR"><section><picture><source type="image/webp" srcset="/assets/blog/dojo-movie-search-app.webp"><source type="image/jpeg" srcset="/assets/blog/dojo-movie-search-app.jpg"><img src="/assets/blog/dojo-movie-search-app.jpg" alt="Build a movie search app with Dojo" loading="lazy"></picture><article class="Article-m__root__5737d01D5nz"><a aria-label="Build a movie search app with Dojo" href="build-movie-app-with-dojo"><h2>Build a movie search app with Dojo</h2></a><p>Rene Rubalcava | November 10, 2019</p><div><p>I was recently reading this <a href="https://www.freecodecamp.org/news/how-to-build-a-movie-search-app-using-react-hooks-24eb72ddfaf7/" target="_blank" rel="nofollow">blog post</a> on building a movie search app with React hooks, and thought it was a pretty good candidate for building a Dojo app.</p>
<p>For this application, we'll be using the <a href="https://www.omdbapi.com/" target="_blank" rel="nofollow">OMDb API</a> where you can also sign up for a free API key.</p>
<h2 id="getting-started">Getting Started</h2>
<p>We can start with a basic dojo template app.</p>
<pre class="language-bash"><code class="language-bash">dojo create app --name movie-search
</code></pre>
<p>Go ahead and remove the routes and the widgets you get by default. This application will contain three distinct elements, a <code>Header</code>, a <code>Search</code> tool, and a <code>Movie</code> card.</p>
<h2 id="data">Data</h2>
<p>First thing is first, since we're working in TypeScript, let's define the data that is going to be used in our application.</p>
<p>The OMDb API will return each movie with the following interface.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/Data.ts</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Record</span> <span class="token punctuation">{</span>
  <span class="token maybe-class-name">Poster</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token maybe-class-name">Title</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token maybe-class-name">Year</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We'll refer to it as a <code>Record</code>. The <code>State</code> of my application will contain an array of <code>Record</code> values and a <code>loading</code> property.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/Data.ts</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
  loading<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  movies<span class="token punctuation">:</span> <span class="token maybe-class-name">Record</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Awesome, now that we know what kind of interfaces we'll be working with, we can start on writing some widgets.</p>
<h2 id="header">Header</h2>
<p>The <code>Header</code> widget is only going to display the name of the application.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/widgets/Header.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> create<span class="token punctuation">,</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/vdom"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">"./styles/Header.m.css"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">HeaderProperties</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HeaderProperties</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">();

export const Header = factory(function Header({ properties }) </span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">);
</span></code></pre>
<p>This widget contains no internal state, so it will just take a <code>title</code> property and display it.</p>
<h2 id="movie">Movie</h2>
<p>The next widget we can make will be the <code>Movie</code> card. The application will display a series of movie cards. We <em>could</em> make an entire widget to encapsulate the movies, but we'll stick with a simple list of cards.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/widgets/Movie.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> create<span class="token punctuation">,</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/vdom"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">"./styles/Movie.m.css"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Record</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../Data"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">DEFAULT_PLACEHOLDER_IMAGE</span> <span class="token operator">=</span>
  <span class="token string">"image_url"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> movie<span class="token punctuation">:</span> <span class="token maybe-class-name">Record</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">Movie</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Movie</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> properties <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> movie <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> poster <span class="token operator">=</span>
    movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Poster</span></span> <span class="token operator">===</span> <span class="token string">"N/A"</span> <span class="token operator">?</span> <span class="token constant">DEFAULT_PLACEHOLDER_IMAGE</span> <span class="token punctuation">:</span> movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Poster</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Title</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The movie titled: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Title</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
          <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>poster<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(</span><span class="token punctuation">{</span>movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Year</span></span><span class="token punctuation">}</span><span class="token plain-text">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Before we start on our <code>Search</code> widget, let's build our search functionality.</p>
<h2 id="stores-and-processes">Stores and Processes</h2>
<p>In Dojo, we'll want to provide our <code>store</code> as middleware in our widgets, so let's make a helper for that.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/middleware/store.ts</span>
<span class="token keyword">import</span> createStoreMiddleware <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/middleware/store"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../Data"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> createStoreMiddleware<span class="token operator">&lt;</span><span class="token maybe-class-name">State</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>That's pretty simple. The reason we want this middleware store is so our widgets can execute processes to interact with external data sources and thus provide data back to our widgets.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/processes/search.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createCommandFactory<span class="token punctuation">,</span>
  createProcess<span class="token punctuation">,</span>
  <span class="token maybe-class-name">ProcessCallback</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/stores/process"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add<span class="token punctuation">,</span> replace <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/stores/state/operations"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">State</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../Data"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">API_KEY</span> <span class="token operator">=</span> <span class="token string">"INSERT_KEY_HERE"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">MOVIE_API_URL</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.omdbapi.com/?s=man&amp;apikey=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_KEY</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// handle updating the loading state when</span>
<span class="token comment">// fetching data</span>
<span class="token keyword">const</span> progress<span class="token punctuation">:</span> <span class="token function-variable function"><span class="token maybe-class-name">ProcessCallback</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">payload<span class="token punctuation">,</span> <span class="token punctuation">{</span> apply<span class="token punctuation">,</span> path <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// update the app store before the process is run</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"loading"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> <span class="token punctuation">{</span> apply<span class="token punctuation">,</span> path <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// update the app store when process is finished</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"loading"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commandFactory <span class="token operator">=</span> createCommandFactory<span class="token operator">&lt;</span><span class="token maybe-class-name">State</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch some initial movies to populate the application</span>
<span class="token keyword">const</span> fetchInitialMoviesCommand <span class="token operator">=</span> <span class="token function">commandFactory</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> path <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">MOVIE_API_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"movies"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Search</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// search for movies</span>
<span class="token keyword">const</span> fetchMoviesCommand <span class="token operator">=</span> <span class="token function">commandFactory</span><span class="token punctuation">(</span>
  <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> path<span class="token punctuation">,</span> payload<span class="token punctuation">:</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.omdbapi.com/?s=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;apikey=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_KEY</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"movies"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Search</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// initial movies process</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> fetchInitialMovies <span class="token operator">=</span> <span class="token function">createProcess</span><span class="token punctuation">(</span>
  <span class="token string">"fetch-initial-movies"</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>fetchInitialMoviesCommand<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>progress<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// search movies process</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> fetchMovies <span class="token operator">=</span> <span class="token function">createProcess</span><span class="token punctuation">(</span>
  <span class="token string">"fetch-movies"</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>fetchMoviesCommand<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>progress<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This process is going to search for movies from the OMDb API and then update the results using <code>return [replace(path("movies"), json.Search)]</code>. This will update the <code>movies</code> value of our application state with our search results.</p>
<p>With the store and process complete, we can beging writing our <code>Search</code> widget to perform the important task of actually searching for movies.</p>
<h2 id="search">Search</h2>
<p>The <code>Search</code> widget will have some internal state to manage the search phrases, so we will use the <a href="https://dojo.io/learn/middleware/available-middleware#icache" target="_blank" rel="nofollow">icache</a> middleware.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/widgets/Search.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> create<span class="token punctuation">,</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/vdom"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> icache <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/middleware/icache"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">"../middleware/store"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchMovies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../processes/search"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">"./styles/Search.m.css"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> icache<span class="token punctuation">,</span> store <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">Search</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Search</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  middleware<span class="token punctuation">:</span> <span class="token punctuation">{</span> icache<span class="token punctuation">,</span> store <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// get current or default empty value</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> icache<span class="token punctuation">.</span><span class="token method function property-access">getOrSet</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
        <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span>
        <span class="token attr-name">onchange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">:</span> <span class="token maybe-class-name">Event</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// when input value changes,</span>
          <span class="token comment">// update internal state value</span>
          <span class="token keyword">const</span> target <span class="token operator">=</span> evt<span class="token punctuation">.</span><span class="token property-access">target</span> <span class="token keyword">as</span> <span class="token maybe-class-name">HTMLInputElement</span><span class="token punctuation">;</span>
          icache<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
        <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">submit</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onclick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">:</span> <span class="token maybe-class-name">Event</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
          evt<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> value <span class="token operator">=</span> icache<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// take value of internal state and</span>
          <span class="token comment">// use the store to execute the search</span>
          store<span class="token punctuation">.</span><span class="token method function property-access">executor</span><span class="token punctuation">(</span>fetchMovies<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span>
        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SEARCH<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The core widgets for our application are now ready and we can bring them together in an <code>App</code> widget.</p>
<h2 id="app">App</h2>
<p>The <code>App</code> widget will load some initial state if needed and display the results.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> create<span class="token punctuation">,</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/vdom"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">"./styles/App.m.css"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Header</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./Header"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Movie</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./Movie"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Search</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./Search"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">"../middleware/store"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchInitialMovies <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../processes/search"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> store <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">App</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> middleware<span class="token punctuation">:</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">,</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> store<span class="token punctuation">;</span>
  <span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"loading"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> movies <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"movies"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// if no movies currently loaded</span>
  <span class="token comment">// fetch some movies to display</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>movies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    store<span class="token punctuation">.</span><span class="token method function property-access">executor</span><span class="token punctuation">(</span>fetchInitialMovies<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Dojo Movie Search<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Search</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Sharing a few of our favorite movies</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">movies</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">classes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">loader</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> movies <span class="token operator">?</span> <span class="token punctuation">(</span>
          movies<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">movie<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Movie</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>movie<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Title</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span> <span class="token attr-name">movie</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>movie<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>virtual</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In the <code>App</code> widget, we are going to request movies if needed and then quickly display some loading text if the application is currently fetching results. If we have some movie results, we can map over those results and create a <code>Movie</code> card for each one.</p>
<p>From here, we can render our application in our <code>main</code> file.</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token comment">// src/main.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderer<span class="token punctuation">,</span> tsx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/core/vdom"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">App</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./widgets/App"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
r<span class="token punctuation">.</span><span class="token method function property-access">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Your completed application should look like this.</p>
<iframe src="https://codesandbox.io/embed/dojo-movie-search-s2gt3?fontsize=14&amp;module=%2Fsrc%2Fprocesses%2Fsearch.ts" width="100%" height="500" frameborder="0"></iframe>
<h2 id="summary">Summary</h2>
<p>I had a lot of fun putting this little movie search application together. Processes and Stores can be very flexible to fetch and transform data, as well as manage various states while loading data. As usual, keep the actual widgets as simple as possible and we can make some really cool applications!</p></div></article></section></div></main><aside class="SignUp-m__root__5737d01pvR6"><div class="SignUp-m__email__5737d020Zk1"><form class="SignUp-m__form__5737d01C66N" action="https://odoe.us9.list-manage.com/subscribe/post?u=711bff655927baa32886103d5&amp;id=6d978f8bcf" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank"><div class="SignUp-m__gridcontainer__5737d01Rne0"><div class="SignUp-m__column__5737d01NIGa"><h3 class="SignUp-m__title__5737d02WSYN"><strong>Subscribe to newsletter</strong></h3><div><label for="mce-EMAIL">Your email</label><input placeholder="Your email" type="email" name="EMAIL" class="SignUp-m__input__5737d02oS1c" id="mce-EMAIL"></div><div><label for="mce-FNAME">Your first name</label><input placeholder="Your first name" type="text" name="FNAME" class="SignUp-m__input__5737d02oS1c" id="mce-FNAME"></div><button class="SignUp-m__submit__5737d02mNG6" type="submit">Subscribe</button><div class="SignUp-m__info__5737d03AU2H"><p>We use Mailchimp as our marketing platform. By clicking below to subscribe, you acknowledge that your information will be transferred to Mailchimp for processing. <a class="SignUp-m__link__5737d03d58p" href="https://mailchimp.com/legal/" rel="noopener noreferrer" target="_blank" aria-label="Learn more about Mailchimp's privacy practices here">Learn more about Mailchimp's privacy practices here.</a></p></div></div></div></form></div></aside><footer class="Footer-m__root__5737d01zPMX"><span> 2019, odoenet</span><br><div><a class="Footer-m__link__5737d03-JoA" href="/atom.xml" rel="noopener noreferrer" target="_blank" aria-label="rss feed"><picture><source type="image/webp" srcset="/assets/images/logos/rss-logo-32px.webp"><source type="image/jpeg" srcset="/assets/images/logos/rss-logo-32px.png"><img alt="rss feed" loading="lazy" class="Footer-m__logo__5737d02kD38" src="/assets/images/logos/rss-logo-32px.png"></picture></a><a class="Footer-m__link__5737d03-JoA" href="https://github.com/odoe/learn-dojo" rel="noopener noreferrer" target="_blank" aria-label="github"><picture><source type="image/webp" srcset="/assets/images/logos/GitHub-Mark-32px.webp"><source type="image/jpeg" srcset="/assets/images/logos/GitHub-Mark-32px.png"><img alt="github" loading="lazy" class="Footer-m__logo__5737d02kD38" src="/assets/images/logos/GitHub-Mark-32px.png"></picture></a><a class="Footer-m__link__5737d03-JoA" href="https://www.youtube.com/channel/UCTMyJW_31j2hyZGKJpddgaQ" rel="noopener noreferrer" target="_blank" aria-label="youtube"><picture><source type="image/webp" srcset="/assets/images/logos/yt_logo_mono_light_32px.webp"><source type="image/jpeg" srcset="/assets/images/logos/yt_logo_mono_light_32px.png"><img alt="youtube" loading="lazy" class="Footer-m__logo__5737d02kD38" src="/assets/images/logos/yt_logo_mono_light_32px.png"></picture></a><a class="Footer-m__link__5737d03-JoA" href="https://dojo.io/" rel="noopener noreferrer" target="_blank" aria-label="powered by @dojo"><br>powered by @dojo</a></div><br><span class="Footer-m__details__5737d02pZwP">Last build: 12/19/2019</span><br></footer></div></div>
<script>
	if (!window['learn_dojo']) {
		window['learn_dojo'].publicPath = window.location.pathname.replace(/(\/)?build-movie-app-with-dojo(\/)?$/, '/');
	}
</script><link rel="stylesheet" href="bootstrap.967d3d5907fe68f7199c.bundle.css" /><link rel="preload" href="prism.1_inztFX.css" as="style"><link rel="preload" href="main.ab9e1153f92f00287f82.bundle.css" as="style"><script src="bootstrap.a221d9dc84d6f034a3c6.bundle.js"></script><script type="text/javascript" src="runtime/block-047e91de66c854f13bd0.22a5564e7cf2ed5bb36e.bundle.js"></script><link rel="preload" href="runtime/blocks.49335487a09c82fdb10d.bundle.js" as="script"><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7" as="script"><link rel="preload" href="https://www.google-analytics.com/analytics.js" as="script"><link rel="preload" href="main.cd4f32baab1f58e637a3.bundle.js" as="script"><link rel="prefetch" href="precache-manifest.bd1b1bdf5a7ab41b1923bb671b483ea2.js" /><link rel="prefetch" href="service-worker.js" /></body>
</html>
