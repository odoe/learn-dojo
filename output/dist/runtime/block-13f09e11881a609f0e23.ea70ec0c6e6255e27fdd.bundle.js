
(window['dojoWebpackJsonplearn_dojo'] = window['dojoWebpackJsonplearn_dojo'] || []).push([['runtime/block-13f09e11881a609f0e23'],{
/***/ 'runtime/block-13f09e11881a609f0e23.js':
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {
"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({"content":{"tag":"div","children":[{"tag":"p","children":["We previously looked at how you can manage state in Dojo with ",{"tag":"a","children":["processes and stores"],"properties":{"href":"https://learn-dojo.com/maintain-state-with-dojo-stores","target":"_blank","rel":"nofollow","key":3},"type":"__VNODE_TYPE"},". This isn't only a flexible way you can manage state in your applications, but it provides some hooks for you to be able to stick your nose into your applications business."],"properties":{"key":4},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["Maybe you want to manage some state in your application when you begin to fetch data and when you have completed fetching data. You could try to manage this in the widget itself or maybe in the process. This is kind of tricky though. Each process can update the store, and you could even run multiple processes at the same time, but it's treated as a single transaction. So you can't really start a process, change the ",{"tag":"code","children":["loading"],"properties":{"key":5},"type":"__VNODE_TYPE"}," state and change it back when you're done in a way that would update your widget in that single transaction."],"properties":{"key":6},"type":"__VNODE_TYPE"},"\n",{"tag":"pre","children":[{"tag":"code","children":[{"tag":"span","children":["// src/processes/starwarsProcesses.ts"],"properties":{"class":"token comment","key":7},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":8},"type":"__VNODE_TYPE"}," fetchItems ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":9},"type":"__VNODE_TYPE"}," commandFactory",{"tag":"span","children":["<"],"properties":{"class":"token operator","key":10},"type":"__VNODE_TYPE"},{"tag":"span","children":["Item"],"properties":{"class":"token maybe-class-name","key":11},"type":"__VNODE_TYPE"},{"tag":"span","children":[">"],"properties":{"class":"token operator","key":12},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":13},"type":"__VNODE_TYPE"},{"tag":"span","children":["async"],"properties":{"class":"token keyword","key":14},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":15},"type":"__VNODE_TYPE"},{"tag":"span","children":[{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":16},"type":"__VNODE_TYPE"}," path ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":17},"type":"__VNODE_TYPE"}],"properties":{"class":"token parameter","key":18},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":19},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["=>"],"properties":{"class":"token arrow operator","key":20},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":21},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["// where do we change the starting state?"],"properties":{"class":"token comment","key":22},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":23},"type":"__VNODE_TYPE"}," response ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":24},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["await"],"properties":{"class":"token keyword","key":25},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["fetch"],"properties":{"class":"token function","key":26},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":27},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"https://swapi.co/api/\""],"properties":{"class":"token string","key":28},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":29},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":30},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":31},"type":"__VNODE_TYPE"}," json ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":32},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["await"],"properties":{"class":"token keyword","key":33},"type":"__VNODE_TYPE"}," response",{"tag":"span","children":["."],"properties":{"class":"token punctuation","key":34},"type":"__VNODE_TYPE"},{"tag":"span","children":["json"],"properties":{"class":"token method function property-access","key":35},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":36},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":37},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":38},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":39},"type":"__VNODE_TYPE"}," items",{"tag":"span","children":[":"],"properties":{"class":"token punctuation","key":40},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["Item"],"properties":{"class":"token maybe-class-name","key":41},"type":"__VNODE_TYPE"},{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":42},"type":"__VNODE_TYPE"},{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":43},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":44},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["Object"],"properties":{"class":"token known-class-name class-name","key":45},"type":"__VNODE_TYPE"},{"tag":"span","children":["."],"properties":{"class":"token punctuation","key":46},"type":"__VNODE_TYPE"},{"tag":"span","children":["keys"],"properties":{"class":"token method function property-access","key":47},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":48},"type":"__VNODE_TYPE"},"json",{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":49},"type":"__VNODE_TYPE"},{"tag":"span","children":["."],"properties":{"class":"token punctuation","key":50},"type":"__VNODE_TYPE"},{"tag":"span","children":["map"],"properties":{"class":"token method function property-access","key":51},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":52},"type":"__VNODE_TYPE"},{"tag":"span","children":["key"],"properties":{"class":"token parameter","key":53},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["=>"],"properties":{"class":"token arrow operator","key":54},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":55},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["return"],"properties":{"class":"token keyword","key":56},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":57},"type":"__VNODE_TYPE"},"\n      label",{"tag":"span","children":[":"],"properties":{"class":"token punctuation","key":58},"type":"__VNODE_TYPE"}," key",{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":59},"type":"__VNODE_TYPE"},"\n      value",{"tag":"span","children":[":"],"properties":{"class":"token punctuation","key":60},"type":"__VNODE_TYPE"}," json",{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":61},"type":"__VNODE_TYPE"},"key",{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":62},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":63},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":64},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":65},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":66},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":67},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["// this workflow doesn't work, the widget never gets the 'true' state"],"properties":{"class":"token comment","key":68},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["// this is a single transaction"],"properties":{"class":"token comment","key":69},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["return"],"properties":{"class":"token keyword","key":70},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":71},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["replace"],"properties":{"class":"token function","key":72},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":73},"type":"__VNODE_TYPE"},{"tag":"span","children":["path"],"properties":{"class":"token function","key":74},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":75},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"loading\""],"properties":{"class":"token string","key":76},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":77},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":78},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["true"],"properties":{"class":"token boolean","key":79},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":80},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":81},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["replace"],"properties":{"class":"token function","key":82},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":83},"type":"__VNODE_TYPE"},{"tag":"span","children":["path"],"properties":{"class":"token function","key":84},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":85},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"items\""],"properties":{"class":"token string","key":86},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":87},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":88},"type":"__VNODE_TYPE"}," items",{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":89},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":90},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["replace"],"properties":{"class":"token function","key":91},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":92},"type":"__VNODE_TYPE"},{"tag":"span","children":["path"],"properties":{"class":"token function","key":93},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":94},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"loading\""],"properties":{"class":"token string","key":95},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":96},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":97},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["false"],"properties":{"class":"token boolean","key":98},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":99},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":100},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":101},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":102},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":103},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":104},"type":"__VNODE_TYPE"},"\n"],"properties":{"class":"language-ts","key":105},"type":"__VNODE_TYPE"}],"properties":{"class":"language-ts","key":106},"type":"__VNODE_TYPE"},"\n",{"tag":"h2","children":["Middleware"],"properties":{"id":"middleware","key":107},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["But fear not! Dojo has a way for you to run some middleware on your processes to do all sorts of cool things! There is some more detailed information ",{"tag":"a","children":["here"],"properties":{"href":"https://github.com/dojo/framework/tree/master/src/stores#middleware","target":"_blank","rel":"nofollow","key":108},"type":"__VNODE_TYPE"},"."],"properties":{"key":109},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["What kind of tasks can you do with middleware?"],"properties":{"key":110},"type":"__VNODE_TYPE"},"\n",{"tag":"ul","children":["\n",{"tag":"li","children":["Transform the fetched result of your process."],"properties":{"key":111},"type":"__VNODE_TYPE"},"\n",{"tag":"li","children":["Validate arguments passed to your process."],"properties":{"key":112},"type":"__VNODE_TYPE"},"\n",{"tag":"li","children":["Define a loading state."],"properties":{"key":113},"type":"__VNODE_TYPE"},"\n",{"tag":"li","children":["Add logging and telemetry."],"properties":{"key":114},"type":"__VNODE_TYPE"},"\n",{"tag":"li","children":["Runtime caching."],"properties":{"key":115},"type":"__VNODE_TYPE"},"\n"],"properties":{"key":116},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["And I'm sure you can think of many more uses!"],"properties":{"key":117},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["The middleware API allows you to provide ",{"tag":"code","children":["after"],"properties":{"key":118},"type":"__VNODE_TYPE"}," and ",{"tag":"code","children":["before"],"properties":{"key":119},"type":"__VNODE_TYPE"}," methods. So in my use case above, We can update the ",{"tag":"code","children":["loading"],"properties":{"key":120},"type":"__VNODE_TYPE"}," state of the process before and after it begins."],"properties":{"key":121},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":[{"tag":"img","properties":{"src":"/assets/images/dojo-process-middleware/middleware-flow.png","key":122},"type":"__VNODE_TYPE"}],"properties":{"key":123},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["To update some loading state, that could look like this!"],"properties":{"key":124},"type":"__VNODE_TYPE"},"\n",{"tag":"pre","children":[{"tag":"code","children":[{"tag":"span","children":["// src/processes/starWarsProcess.ts"],"properties":{"class":"token comment","key":125},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":126},"type":"__VNODE_TYPE"}," progress",{"tag":"span","children":[":"],"properties":{"class":"token punctuation","key":127},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":[{"tag":"span","children":["ProcessCallback"],"properties":{"class":"token maybe-class-name","key":128},"type":"__VNODE_TYPE"}],"properties":{"class":"token function-variable function","key":129},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":130},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":131},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":132},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["=>"],"properties":{"class":"token arrow operator","key":133},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":134},"type":"__VNODE_TYPE"},{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":135},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["before"],"properties":{"class":"token function","key":136},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":137},"type":"__VNODE_TYPE"},{"tag":"span","children":["payload",{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":138},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":139},"type":"__VNODE_TYPE"}," apply",{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":140},"type":"__VNODE_TYPE"}," path ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":141},"type":"__VNODE_TYPE"}],"properties":{"class":"token parameter","key":142},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":143},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":144},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["// update the app store before the process is run"],"properties":{"class":"token comment","key":145},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["apply"],"properties":{"class":"token function","key":146},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":147},"type":"__VNODE_TYPE"},{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":148},"type":"__VNODE_TYPE"},{"tag":"span","children":["replace"],"properties":{"class":"token function","key":149},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":150},"type":"__VNODE_TYPE"},{"tag":"span","children":["path"],"properties":{"class":"token function","key":151},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":152},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"loading\""],"properties":{"class":"token string","key":153},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":154},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":155},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["true"],"properties":{"class":"token boolean","key":156},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":157},"type":"__VNODE_TYPE"},{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":158},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":159},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["true"],"properties":{"class":"token boolean","key":160},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":161},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":162},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":163},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":164},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["after"],"properties":{"class":"token function","key":165},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":166},"type":"__VNODE_TYPE"},{"tag":"span","children":["error",{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":167},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":168},"type":"__VNODE_TYPE"}," apply",{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":169},"type":"__VNODE_TYPE"}," path ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":170},"type":"__VNODE_TYPE"}],"properties":{"class":"token parameter","key":171},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":172},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":173},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["// update the app store when process is finished"],"properties":{"class":"token comment","key":174},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["apply"],"properties":{"class":"token function","key":175},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":176},"type":"__VNODE_TYPE"},{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":177},"type":"__VNODE_TYPE"},{"tag":"span","children":["replace"],"properties":{"class":"token function","key":178},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":179},"type":"__VNODE_TYPE"},{"tag":"span","children":["path"],"properties":{"class":"token function","key":180},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":181},"type":"__VNODE_TYPE"},{"tag":"span","children":["\"loading\""],"properties":{"class":"token string","key":182},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":183},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":184},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["false"],"properties":{"class":"token boolean","key":185},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":186},"type":"__VNODE_TYPE"},{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":187},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":188},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["true"],"properties":{"class":"token boolean","key":189},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":190},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":191},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":192},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":193},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":194},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":195},"type":"__VNODE_TYPE"},"\n"],"properties":{"class":"language-ts","key":196},"type":"__VNODE_TYPE"}],"properties":{"class":"language-ts","key":197},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["In the middleware methods, we're given an ",{"tag":"code","children":["apply"],"properties":{"key":198},"type":"__VNODE_TYPE"}," and a ",{"tag":"code","children":["path"],"properties":{"key":199},"type":"__VNODE_TYPE"},". The ",{"tag":"code","children":["apply"],"properties":{"key":200},"type":"__VNODE_TYPE"}," lets us ",{"tag":"em","children":["apply"],"properties":{"key":201},"type":"__VNODE_TYPE"}," an operation to the store, and the ",{"tag":"code","children":["path"],"properties":{"key":202},"type":"__VNODE_TYPE"}," lets us pick the property that we want to act on. In this case, we can use the ",{"tag":"code","children":["replace"],"properties":{"key":203},"type":"__VNODE_TYPE"}," operation to ",{"tag":"em","children":["update"],"properties":{"key":204},"type":"__VNODE_TYPE"}," an existing property. This state update will propagate to any other parts of the application that are using this store."],"properties":{"key":205},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["Now we can update the process to use this middleware!"],"properties":{"key":206},"type":"__VNODE_TYPE"},"\n",{"tag":"pre","children":[{"tag":"code","children":[{"tag":"span","children":["// src/processes/starWarsProcess.ts"],"properties":{"class":"token comment","key":207},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["export"],"properties":{"class":"token keyword","key":208},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["const"],"properties":{"class":"token keyword","key":209},"type":"__VNODE_TYPE"}," fetchItemsProcess ",{"tag":"span","children":["="],"properties":{"class":"token operator","key":210},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["createProcess"],"properties":{"class":"token function","key":211},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":212},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["\"fetch-items\""],"properties":{"class":"token string","key":213},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":214},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["// process name"],"properties":{"class":"token comment","key":215},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":216},"type":"__VNODE_TYPE"},"fetchItems",{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":217},"type":"__VNODE_TYPE"},{"tag":"span","children":[","],"properties":{"class":"token punctuation","key":218},"type":"__VNODE_TYPE"},"  ",{"tag":"span","children":["// command"],"properties":{"class":"token comment","key":219},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["["],"properties":{"class":"token punctuation","key":220},"type":"__VNODE_TYPE"},"progress",{"tag":"span","children":["]"],"properties":{"class":"token punctuation","key":221},"type":"__VNODE_TYPE"},"     ",{"tag":"span","children":["// middleware"],"properties":{"class":"token comment","key":222},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":223},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":224},"type":"__VNODE_TYPE"},"\n"],"properties":{"class":"language-ts","key":225},"type":"__VNODE_TYPE"}],"properties":{"class":"language-ts","key":226},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["With the middleware in place, we can update the widget so that it can recognize when data is being fetched."],"properties":{"key":227},"type":"__VNODE_TYPE"},"\n",{"tag":"pre","children":[{"tag":"code","children":[{"tag":"span","children":["// src/widgets/APIExplorer.tsx"],"properties":{"class":"token comment","key":228},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["export"],"properties":{"class":"token keyword","key":229},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["class"],"properties":{"class":"token keyword","key":230},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["APIExplorer"],"properties":{"class":"token class-name","key":231},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["extends"],"properties":{"class":"token keyword","key":232},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["WidgetBase"],"properties":{"class":"token class-name","key":233},"type":"__VNODE_TYPE"},{"tag":"span","children":[{"tag":"span","children":[{"tag":"span","children":["<"],"properties":{"class":"token punctuation","key":234},"type":"__VNODE_TYPE"},{"tag":"span","children":["ExplorerProperties"],"properties":{"class":"token class-name","key":235},"type":"__VNODE_TYPE"}],"properties":{"class":"token tag","key":236},"type":"__VNODE_TYPE"},{"tag":"span","children":[">"],"properties":{"class":"token punctuation","key":237},"type":"__VNODE_TYPE"}],"properties":{"class":"token tag","key":238},"type":"__VNODE_TYPE"},{"tag":"span","children":[" "],"properties":{"class":"token plain-text","key":239},"type":"__VNODE_TYPE"},{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":240},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["..."],"properties":{"class":"token spread operator","key":241},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["render"],"properties":{"class":"token method function property-access","key":242},"type":"__VNODE_TYPE"},{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":243},"type":"__VNODE_TYPE"},{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":244},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":245},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":["return"],"properties":{"class":"token keyword","key":246},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["("],"properties":{"class":"token punctuation","key":247},"type":"__VNODE_TYPE"},"\n      ",{"tag":"span","children":["..."],"properties":{"class":"token spread operator","key":248},"type":"__VNODE_TYPE"},"\n      ",{"tag":"span","children":[{"tag":"span","children":[{"tag":"span","children":["<"],"properties":{"class":"token punctuation","key":249},"type":"__VNODE_TYPE"},{"tag":"span","children":["TextArea"],"properties":{"class":"token class-name","key":250},"type":"__VNODE_TYPE"}],"properties":{"class":"token tag","key":251},"type":"__VNODE_TYPE"},"\n       ",{"tag":"span","children":["rows"],"properties":{"class":"token attr-name","key":252},"type":"__VNODE_TYPE"},{"tag":"span","children":[{"tag":"span","children":["="],"properties":{"class":"token script-punctuation punctuation","key":253},"type":"__VNODE_TYPE"},{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":254},"type":"__VNODE_TYPE"},{"tag":"span","children":["25"],"properties":{"class":"token number","key":255},"type":"__VNODE_TYPE"},{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":256},"type":"__VNODE_TYPE"}],"properties":{"class":"token script language-javascript","key":257},"type":"__VNODE_TYPE"},"\n       ",{"tag":"span","children":["theme"],"properties":{"class":"token attr-name","key":258},"type":"__VNODE_TYPE"},{"tag":"span","children":[{"tag":"span","children":["="],"properties":{"class":"token script-punctuation punctuation","key":259},"type":"__VNODE_TYPE"},{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":260},"type":"__VNODE_TYPE"},"theme",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":261},"type":"__VNODE_TYPE"}],"properties":{"class":"token script language-javascript","key":262},"type":"__VNODE_TYPE"},"\n       ",{"tag":"span","children":["value"],"properties":{"class":"token attr-name","key":263},"type":"__VNODE_TYPE"},{"tag":"span","children":[{"tag":"span","children":["="],"properties":{"class":"token script-punctuation punctuation","key":264},"type":"__VNODE_TYPE"},{"tag":"span","children":["{"],"properties":{"class":"token punctuation","key":265},"type":"__VNODE_TYPE"},"loading ",{"tag":"span","children":["?"],"properties":{"class":"token operator","key":266},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":["\"Loading...\""],"properties":{"class":"token string","key":267},"type":"__VNODE_TYPE"}," ",{"tag":"span","children":[":"],"properties":{"class":"token punctuation","key":268},"type":"__VNODE_TYPE"}," result",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":269},"type":"__VNODE_TYPE"}],"properties":{"class":"token script language-javascript","key":270},"type":"__VNODE_TYPE"},"\n      ",{"tag":"span","children":["/>"],"properties":{"class":"token punctuation","key":271},"type":"__VNODE_TYPE"}],"properties":{"class":"token tag","key":272},"type":"__VNODE_TYPE"},"\n      ",{"tag":"span","children":["..."],"properties":{"class":"token spread operator","key":273},"type":"__VNODE_TYPE"},"\n    ",{"tag":"span","children":[")"],"properties":{"class":"token punctuation","key":274},"type":"__VNODE_TYPE"},{"tag":"span","children":[";"],"properties":{"class":"token punctuation","key":275},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":276},"type":"__VNODE_TYPE"},"\n  ",{"tag":"span","children":["..."],"properties":{"class":"token spread operator","key":277},"type":"__VNODE_TYPE"},"\n",{"tag":"span","children":["}"],"properties":{"class":"token punctuation","key":278},"type":"__VNODE_TYPE"},{"tag":"span","children":["\n"],"properties":{"class":"token plain-text","key":279},"type":"__VNODE_TYPE"}],"properties":{"class":"language-tsx","key":280},"type":"__VNODE_TYPE"}],"properties":{"class":"language-tsx","key":281},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["Now in the widget, if the store ",{"tag":"code","children":["loading"],"properties":{"key":282},"type":"__VNODE_TYPE"}," state is true, we can show some loading text, if it's not loading, we can show the result!"],"properties":{"key":283},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["You can see what this looks like in this ",{"tag":"a","children":["code sandbox"],"properties":{"href":"https://codesandbox.io/embed/dojo-stores-middleware-ho8kn?fontsize=14&module=%2Fsrc%2Fprocesses%2FstarwarsProcesses.ts","target":"_blank","rel":"nofollow","key":284},"type":"__VNODE_TYPE"},"!"],"properties":{"key":285},"type":"__VNODE_TYPE"},"\n",{"tag":"h2","children":["Summary"],"properties":{"id":"summary","key":286},"type":"__VNODE_TYPE"},"\n",{"tag":"p","children":["The ability to have the after/before middleware in our application state is not only practical, but incredibly flexible. We've just scratched the surface of what you can do with Dojo middleware, but I'm excited about the possibilities and I'm sure you are too!"],"properties":{"key":287},"type":"__VNODE_TYPE"}],"properties":{"key":288},"type":"__VNODE_TYPE"},"meta":{"title":"Using Middleware with Dojo Processes","date":"2019-07-14T00:00:00.000Z","author":"Rene Rubalcava","description":"How you can inject yourself into the Dojo process, juggle your data, and manage state updates","tags":"javascript, web development, dojo, dojo5","cover_image":"/assets/blog/dojo-process-middleware.jpg","published":true}});
/***/ })
}]);
