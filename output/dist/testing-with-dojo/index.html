<!DOCTYPE html>
<html lang="en-us">
<head><base href="/">
  <title>learn dojo</title>
  <meta charset="utf-8">
	<meta name="theme-color" content="#009dff">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="learn dojo - byte by byte">
	<link rel="icon" href="/assets/favicon.ico" />
	<link rel="stylesheet" type="text/css" href="prism.1_inztFX.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-56544808-7');
	</script>
<meta name="apple-mobile-web-app-title" content="learn-dojo" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="apple-mobile-web-app-status-bar-style" content="default" /><meta name="theme-color" content="#009dff" /><link rel="apple-touch-icon" sizes="512x512" href="icon_512x512.ca45ef50142a78ad4bd2d28215f15034.png" /><link rel="apple-touch-icon" sizes="256x256" href="icon_256x256.7da342a93e078e9a7fef21fa5d9dbbaf.png" /><link rel="apple-touch-icon" sizes="128x128" href="icon_128x128.811bfb9a7c545c93ad37790968688f24.png" /><link rel="manifest" href="manifest.83b2d52a04a4315afec956b410eaacf0.json" /><script>window.__app_base__ = '/'</script><meta name="mobile-web-app-capable" content="yes"><style>@import url(https://fonts.googleapis.com/css?family=Montserrat&display=swap);html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.6666666666666667 Georgia,Cambria,serif;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:scroll}*{-webkit-box-sizing:inherit;box-sizing:inherit}:before{-webkit-box-sizing:inherit;box-sizing:inherit}:after{-webkit-box-sizing:inherit;box-sizing:inherit}body{color:rgba(0,0,0,.87);font-family:Georgia,Cambria,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;padding:0;margin:0 0 1.66667rem}h1{font-size:2rem}h1,h2{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.51572rem}h3{font-size:1.31951rem}h3,h4{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.87055rem}h5,h6{padding:0;margin:0 0 1.66667rem;color:rgba(0,0,0,.5);font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.81225rem;font-style:italic}hgroup{padding:0;margin:0 0 1.66667rem}ul{list-style-position:outside;list-style-image:none;list-style:disc}ol,ul{padding:0;margin:0 0 1.66667rem 1.66667rem}ol{list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.66667rem}pre{font-size:.85rem}pre,table{padding:0;margin:0 0 1.66667rem;line-height:1.66667rem}table{font-size:1rem;border-collapse:collapse;width:100%}fieldset{padding:0}blockquote,fieldset{margin:0 0 1.66667rem}blockquote{padding:.83333rem .83333rem .83333rem 1.45833rem;font-size:1.1487rem;line-height:1.66667rem;background:rgba(0,0,0,.03);color:rgba(0,0,0,.69);border-left:.20833rem solid rgba(0,0,0,.2)}form,iframe,noscript{padding:0;margin:0 0 1.66667rem}hr{padding:0;margin:0 0 calc(1.66667rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.66667rem}b,dt,strong,th{font-weight:700}li{margin-bottom:calc(1.66667rem / 2)}ol li,ul li{padding-left:0}li>ol{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}li>ul{margin-left:1.66667rem;margin-bottom:calc(1.66667rem / 2);margin-top:calc(1.66667rem / 2)}blockquote :last-child{margin-bottom:0}li :last-child{margin-bottom:0}p :last-child{margin-bottom:0}li>p{margin-bottom:calc(1.66667rem / 2)}code,kbd,samp{font-size:.85rem;line-height:1.66667rem}abbr,acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help;text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.83333rem 1.11111rem calc(.83333rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}a{color:#07e;text-decoration:none}a:active,a:hover{color:#e32}blockquote>:last-child{margin-bottom:0}blockquote cite{font-size:1rem;line-height:1.66667rem;color:rgba(0,0,0,.87);font-weight:400}blockquote cite:before{content:"\2014   "}@media only screen and (max-width:480px){ol,ul{margin-left:1.66667rem}blockquote{margin-left:-1.25rem;margin-right:-1.25rem;padding-left:1.14583rem;padding-right:1.25rem}}h1,h2,h3,h4,h5,h6{margin-top:3.33333rem}body{margin:0;padding:0;color:rgba(46,46,46,.95)}header{font-family:Montserrat,sans-serif;font-weight:400;text-rendering:optimizeLegibility;line-height:1.1}article img{display:block;max-width:500px;margin:0 auto}code[class*=language-],pre[class*=language-]{font-size:14px}@media only screen and (max-width:480px){article img{display:block;max-width:300px;margin:0 auto}}.button-m__root__12yR4,.button-m__root__12yR4 *,.button-m__root__12yR4:after,.button-m__root__12yR4:before{-webkit-box-sizing:border-box;box-sizing:border-box}.button-m__root__12yR4{background-color:#fff;background-color:var(--color-background);border:1px solid #d6dde2;border:var(--border-width) solid var(--color-border);color:#006be6;color:var(--color-highlight);cursor:pointer;display:inline-block;font-size:16px;font-size:var(--font-size-base);font-weight:700;line-height:24px;line-height:var(--line-height-base);min-width:calc(8px * 20);min-width:calc(var(--grid-base) * 20);padding:8px;padding:var(--spacing-regular);-webkit-transition:-webkit-box-shadow .25s ease;transition:-webkit-box-shadow .25s ease;transition:box-shadow .25s ease;transition:box-shadow .25s ease,-webkit-box-shadow .25s ease;-webkit-transition:-webkit-box-shadow var(--transition-duration) var(--transition-easing);transition:-webkit-box-shadow var(--transition-duration) var(--transition-easing);transition:box-shadow var(--transition-duration) var(--transition-easing);transition:box-shadow var(--transition-duration) var(--transition-easing),-webkit-box-shadow var(--transition-duration) var(--transition-easing);margin:0}.button-m__root__12yR4:focus,.button-m__root__12yR4:hover{border-color:#006be6;border-color:var(--color-highlight);-webkit-box-shadow:0 2px 2px 0 rgba(0,107,230,.2);box-shadow:0 2px 2px 0 rgba(0,107,230,.2);-webkit-box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);box-shadow:var(--box-shadow-dimensions-small) var(--color-box-shadow-highlight);outline:none}.button-m__root__12yR4:focus .button-m__addon__1vLjS,.button-m__root__12yR4:hover .button-m__addon__1vLjS{border-left-color:#006be6;border-left-color:var(--color-highlight)}@-webkit-keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@keyframes combobox-m__fadeInOpacity__3EJ36{0%{opacity:0}to{opacity:1}}@-webkit-keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes grid-placeholder-row-m__spin__FCJF0{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@font-face{font-family:dojo2BaseTheme;src:url(4320b561bf6b259b0082d83d4848daf9.3VSAx8ft.ttf) format("truetype"),url(a302b51c64828d7c0aaf95c1cfa4daad.2JSGjfMp.woff) format("woff"),url(79b71beaafd0e1d0897d414fa6b1f796.2mZX6CjQ.svg#dojo2) format("svg");font-weight:400;font-style:normal}@-webkit-keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}@keyframes select-m__fadeInOpacity__198JF{0%{opacity:0}to{opacity:1}}:root{--tab-width:calc(var(--grid-base) * 16)}:root{--grid-base:8px;--spacing-regular:var(--grid-base);--spacing-large:calc(var(--grid-base) * 2);--touch-target-min:48px;--font-size-base:16px;--font-size-small:14px;--font-size-title:20px;--font-size-icon:24px;--line-height-base:24px;--color-dark:#333;--color-text-primary:#000;--color-text-faded:#5c6c7c;--color-text-inverted:#fff;--color-highlight:#006be6;--color-highlight-border:#298dff;--color-success:#188701;--color-error:#eb1313;--color-background:#fff;--color-background-inverted:#5c6c7c;--color-background-faded:#f4f6f7;--color-border:#d6dde2;--color-border-strong:#5c6c7c;--color-border-invalid:#f7c4c4;--color-border-valid:#bcefb1;--color-box-shadow:rgba(0,0,0,0.2);--color-box-shadow-highlight:rgba(0,107,230,0.2);--color-box-shadow-strong:rgba(0,0,0,0.5);--color-box-shadow-focus:rgba(0,107,230,0.2);--color-box-shadow-invalid:rgba(235,19,19,0.2);--color-box-shadow-valid:rgba(24,135,1,0.2);--box-shadow-dimensions-small:0 2px 2px 0;--box-shadow-dimensions-large:0 9px 16px 0;--border-width:1px;--border-width-emphasized:2px;--border-radius:4px;--transition-duration:0.25s;--transition-easing:ease;--zindex-base:0;--zindex-tooltip:100;--zindex-dropdown:200;--zindex-fixed:300;--zindex-dialog:400;--zindex-alert:500}.Blog-m__root__1B0aR{padding:1.2rem}.Footer-m__root__1zPMX{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center;padding:3rem 1rem;overflow:hidden}.Footer-m__details__2pZwP{font-size:.75rem}.Header-m__root__15XcQ{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;color:#fff;background-color:#333;padding:1rem}.Header-m__title__3OSiY{font-size:20px;margin:0;font-weight:400}.Header-m__link__2GEKH:hover{color:#fff;background-color:#333}.Header-m__link__2GEKH{min-width:140px;text-align:center;text-decoration:none;padding:18px;color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.Hero-m__root__12HF4{width:100vw;height:300px;background-size:cover;background-position:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;left:50%;right:50%;margin:0 -50vw 2rem;background-image:url(/assets/images/learn-dojo-jumbotron.jpg)}.Hero-m__description__3I4v5{margin-left:calc(5 * var(--grid-base));margin-top:calc(var(--grid-base));position:absolute;font-size:.8rem;top:0;color:#fff}@font-face{font-family:dojo2;src:url(dojo2.1jRzby-N.ttf) format("truetype"),url(dojo2.6KF-s-BX.woff) format("woff"),url(dojo2.1LTNJcFj.svg#dojo2) format("svg");font-weight:400;font-style:normal}.SignUp-m__root__1pvR6{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.SignUp-m__title__2WSYN{margin-top:0}.SignUp-m__email__20Zk1{margin:90px 0 40px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Droid Sans,Helvetica Neue,Fira Sans,sans-serif}.SignUp-m__form__1C66N{background-color:#fff;border-radius:6px;-webkit-box-shadow:0 2px 15px 0 rgba(210,214,220,.5);box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.SignUp-m__gridcontainer__1Rne0{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%}.SignUp-m__column__1NIGa{padding:20px}.SignUp-m__gdpr__1Y92a{background-color:#f3f3f3}.SignUp-m__gdprcheck__2qi1q{display:block;padding-left:15px;text-indent:-15px}.SignUp-m__checkbox__1sBso{width:13px;height:13px;padding:0;margin:2px;vertical-align:bottom;position:relative;top:-1px;*overflow:hidden}.SignUp-m__info__3AU2H{margin:15px 0;font-size:.7rem}.SignUp-m__input__2oS1c{width:100%;border-radius:4px;color:#000;font-weight:400;background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:5px;-webkit-transition:border-color .3s ease-out;transition:border-color .3s ease-out}.SignUp-m__fieldset__2wCAE{border:0}.Layout-m__root__3l2TO{-webkit-box-shadow:rgba(0,0,0,.1) 0 4px 120px;box-shadow:0 4px 120px rgba(0,0,0,.1);grid-column:1/6;padding:0;overflow:hidden}.Layout-m__section__1sUgf{grid-column:2/auto;padding:0 9rem}@media only screen and (max-width:900px){.Layout-m__root__3l2TO{grid-column:1/6;padding:0}.Layout-m__section__1sUgf{grid-column:1/6;padding:0 2rem}}@media only screen and (max-width:480px){.Layout-m__root__3l2TO,.Layout-m__section__1sUgf{grid-column:1/6;padding:0}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}</style></head>
<body>
	<div id="root"><div class="Layout-m__root__3l2TO"><header class="Header-m__root__15XcQ"><div class="Header-m__title__3OSiY"><a class="Header-m__link__2GEKH" href="/">learn dojo</a></div></header><div class="Hero-m__root__12HF4"><h3 class="Hero-m__description__3I4v5">byte by byte</h3></div><main class="Layout-m__section__1sUgf"><div class="Blog-m__root__1B0aR"><section><img src="/assets/blog/testing-with-dojo.jpg"><article class="Article-m__root__1D5nz"><a href="testing-with-dojo"><h2>Testing with Dojo</h2></a><p>Rene Rubalcava | May 5, 2019</p><div><p>When you use the <a href="https://github.com/dojo/cli" target="_blank" rel="nofollow">Dojo cli</a> to create an application, it comes with a full test framework for you to use. If like me, you aren't as diligent with your tests as you maybe you could be, that's ok, there's no testing police that will give you a citation, <em>only your own shame when you try to track down how you broke some feature after some updates you made</em>. I kid, I kid. But, it is a good idea to have some tests written to make sure core features of your application don't break as you write new code.</p>
<p>When you first create a Dojo application, it will already provide you with some unit tests that you can use as a guide.</p>
<p>You can find this sample repo <a href="https://github.com/odoe/dojo-testing" target="_blank" rel="nofollow">on github</a>.</p>
<p>Let's see what a unit test looks like.</p>
<h2 id="running-tests">Running Tests</h2>
<p>You can run these tests using <code>npm test</code> and you should get results like below.</p>
<p>So what does one of these tests look like?</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// tests/unit/widgets/Profile.ts</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> describe<span class="token punctuation">,</span> it <span class="token punctuation">}</span> <span class="token operator">=</span> intern<span class="token punctuation">.</span><span class="token method function property-access">getInterface</span><span class="token punctuation">(</span><span class="token string">"bdd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> harness <span class="token keyword">from</span> <span class="token string">"@dojo/framework/testing/harness"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> w<span class="token punctuation">,</span> v <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dojo/framework/widget-core/d"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token maybe-class-name">Profile</span> <span class="token keyword">from</span> <span class="token string">"../../../src/widgets/Profile"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> css <span class="token keyword">from</span> <span class="token string">"../../../src/widgets/styles/Profile.m.css"</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"Profile"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"default renders correctly"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token function">harness</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">"Dojo User"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h<span class="token punctuation">.</span><span class="token method function property-access">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> classes<span class="token punctuation">:</span> <span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Welcome Dojo User!"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>When testing widgets, you are basically testing that the output of the widget is what you expect, especially when given a set of properties. Ideally, rendering a widget is going to be <em><a href="https://github.com/MostlyAdequate/mostly-adequate-guide/blob/master/ch03.md#chapter-03-pure-happiness-with-pure-functions" target="_blank" rel="nofollow">pure function</a></em>, meaning they should be pretty easy to test when given the same input.</p>
<p>The Dojo framework comes with a <a href="https://github.com/dojo/framework/tree/master/src/testing#harness" target="_blank" rel="nofollow">harness</a> helper, which can be used to test your widgets. You can give it a widget, and check that the virtual DOM output is what you expect.</p>
<ul>
<li>Does it render as expected?</li>
<li>Does a child widget or element render as expected?</li>
<li>Do event handlers work as expected?</li>
</ul>
<h2 id="assertion-templates">Assertion Templates</h2>
<p>The Profile widget we tested above has a property username that we can test against in the output. We could rewrite the entirety of the expected virtual DOM output for each test (that's a lot of typing) or we could create an assertion to test against that would allow us to change the expected properties on each run.</p>
<p>Let's see how that would work.</p>
<p>First, I need to update the Profile widget slightly since the <code>username</code> property is required. We can make it optional and provide a default value in the widget.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/widgets/Profile.ts</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ProfileProperties</span> <span class="token punctuation">{</span>
  username<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Profile</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span><span class="token operator">&lt;</span><span class="token maybe-class-name">ProfileProperties</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> username <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">properties</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> classes<span class="token punctuation">:</span> <span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Welcome </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username <span class="token operator">||</span> <span class="token string">"Stranger"</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This is a little safer anyway. Now in my test, I can create my assertion template.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// tests/unit/widgets/Profile.ts</span>
<span class="token comment">// Add the assertionTemplate module</span>
<span class="token keyword">import</span> assertionTemplate <span class="token keyword">from</span> <span class="token string">"@dojo/framework/testing/assertionTemplate"</span><span class="token punctuation">;</span>
<span class="token spread operator">...</span>

<span class="token comment">// Create my assertion</span>
<span class="token keyword">const</span> profileAssertion <span class="token operator">=</span> <span class="token function">assertionTemplate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
  <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> classes<span class="token punctuation">:</span> <span class="token punctuation">[</span>css<span class="token punctuation">.</span><span class="token property-access">root</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"~key"</span><span class="token punctuation">:</span> <span class="token string">"welcome"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Welcome Stranger!"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"Profile"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"default renders correctly"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token function">harness</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Test against my base assertion</span>
    h<span class="token punctuation">.</span><span class="token method function property-access">expect</span><span class="token punctuation">(</span>profileAssertion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>We can test against our base assertion like we did before. In our assertion template, we add a <code>~key</code> property to the node so that we can update it's expected output. In a tsx file, this is called <code>assertion-key</code>.</p>
<p>We can now test the output if we provide a given property to the widget.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// src/tests/unit/widgets/Profile.ts</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"Profile"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"default renders correctly"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token function">harness</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h<span class="token punctuation">.</span><span class="token method function property-access">expect</span><span class="token punctuation">(</span>profileAssertion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders given username correctly"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// update the expected result with a given username</span>
    <span class="token keyword">const</span> namedAssertion <span class="token operator">=</span> profileAssertion<span class="token punctuation">.</span><span class="token method function property-access">setChildren</span><span class="token punctuation">(</span><span class="token string">"~welcome"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">"Welcome Kel Varnsen!"</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token function">harness</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> username<span class="token punctuation">:</span> <span class="token string">"Kel Varnsen"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h<span class="token punctuation">.</span><span class="token method function property-access">expect</span><span class="token punctuation">(</span>namedAssertion<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>What the <code>~key</code> allows is for us to update that expected portion of our assertion template. So if I provide a <code>username</code>, I should expect a different welcome message. The <code>assertionTemplate.setChildren()</code> returns a new assertion template you can reference so that you don't need to reset it after each unit test, which is incredibly useful and I think is a nice touch to the library.</p>
<p>You can read more about assertion templates and some of its other useful methods in the <a href="https://github.com/dojo/framework/tree/master/src/testing#assertion-templates" target="_blank" rel="nofollow">documentation</a>.</p>
<h2 id="summary">Summary</h2>
<p>This was just a quick look at testing with Dojo, but I think it highlights how useful the provided tools are for you test your widgets! Dojo tests use <a href="https://theintern.io/" target="_blank" rel="nofollow">intern</a> by default, so you can look at the docs on how to test the business logic of your applications as well. An added benefit here is that intern provides <a href="https://theintern.io/docs.html#Intern/4/docs/docs%2Fwriting_tests.md/functional-tests" target="_blank" rel="nofollow">functional tests</a>, so you can test the behavior of your application as a user would interact with it. This would require a blog post of its own, but you can look at the <a href="https://github.com/dojo/examples/tree/master/todo-mvc" target="_blank" rel="nofollow">Dojo todo-mvc example</a> to see how it uses functional tests.</p>
<p>Now I know everyone is going to go out and write unit tests for all their code!</p></div></article></section></div></main><aside class="SignUp-m__root__1pvR6"><div class="SignUp-m__email__20Zk1"><form class="SignUp-m__form__1C66N" action="https://odoe.us9.list-manage.com/subscribe/post?u=711bff655927baa32886103d5&amp;id=6d978f8bcf" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank"><div class="SignUp-m__gridcontainer__1Rne0"><div class="SignUp-m__column__1NIGa SignUp-m__gdpr__1Y92a"><h3 class="SignUp-m__title__2WSYN"><strong>Subscribe to newsletter</strong></h3><div class="SignUp-m__info__3AU2H"><div><label>Marketing Permissions</label><p>Please select all the ways you would like to hear from odoenet:</p><fieldset class="SignUp-m__fieldset__2wCAE" name="interestgroup_field"><label class="SignUp-m__gdprcheck__2qi1q" for="gdpr_7561"><input type="checkbox" id="gdpr_7561" name="gdpr[7561]" value="Y" class="SignUp-m__checkbox__1sBso"><span>Email</span> </label></fieldset><p>You can unsubscribe at any time by clicking the link in the footer of our emails. For information about our privacy practices, please visit our website.</p></div></div></div><div class="SignUp-m__column__1NIGa"><div><input placeholder="Your email" type="email" name="EMAIL" class="SignUp-m__input__2oS1c" id="mce-EMAIL"></div><div><input placeholder="Your first name" type="text" name="FNAME" class="SignUp-m__input__2oS1c" id="mce-FNAME"></div><button class="button-m__root__12yR4" type="submit">Submit</button><div class="SignUp-m__info__3AU2H"><p>We use Mailchimp as our marketing platform. By clicking below to subscribe, you acknowledge that your information will be transferred to Mailchimp for processing. <a href="https://mailchimp.com/legal/" target="_blank">Learn more about Mailchimp's privacy practices here.</a></p></div></div></div></form></div></aside><footer class="Footer-m__root__1zPMX"><span>© 2019, odoenet</span><br><a href="https://github.com/odoe/learn-dojo" target="_blank">github</a><br><a href="https://dojo.io/" target="_blank">powered by @dojo</a><br><a href="/atom.xml">rss feed</a><br><span class="Footer-m__details__2pZwP">Last build: 8/27/2019</span></footer></div></div>
<script>
	window.__public_path__ = window.location.pathname.replace(/(\/)?testing-with-dojo(\/)?$/, '/');
</script><link rel="stylesheet" href="bootstrap.889658ec741c39d3aefb.bundle.css" /><link rel="preload" href="prism.1_inztFX.css" as="style"><link rel="preload" href="main.ae03610e94b98ac4707b.bundle.css" as="style"><script src="bootstrap.091b617ec97dbca49e07.bundle.js"></script><script type="text/javascript" src="runtime/block-c1325f13fa4400d4e34d.252e78d7ac0ef7a3a696.bundle.js"></script><script type="text/javascript" src="runtime/block-67b9bcc7290ea4900c26.203c9b7cdc4b6b788736.bundle.js"></script><link rel="preload" href="https://www.google-analytics.com/analytics.js" as="script"><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=UA-56544808-7" as="script"><link rel="preload" href="runtime/blocks.ea6e1de1b46c50a0f5d4.bundle.js" as="script"><link rel="preload" href="main.9ba75550f89c7ec28ece.bundle.js" as="script"></body>
</html>
